!function(t){"use strict";var o=function(e){this.options=t.extend({titleIcon:"",closeText:"Annuler"},e),o._initialized||this.firstRun(),this.init()};function e(e){e.each((function(){var e=t("[href='#"+t(this).attr("id")+"']:first"),i="";e.hasClass("ico-after")&&(i=e.attr("class").split(" ").concat(["light"]).filter((function(t){return-1===["","ico-after","open-modal","blue"].indexOf(t)&&-1===t.indexOf("btn-")})).join(" ")),new o({title:t(this).is("[data-modal-title]")?t(this).attr("data-modal-title"):e.text(),footer:t(this).find(".btn, [type=submit]").filter(":not(.modal-inner)").detach(),body:t(this).children(),modal:t(this),closeText:t(this).is("[data-modal-close]")?t(this).attr("data-modal-close"):"Annuler",titleIcon:i})}))}o.closeCurrent=function(){o.current.modal.removeClass("open"),o.container.removeClass("open"),t("html").removeClass("dropdown-active"),o.current=null},o.openModal=function(t){o.list[t]&&o.list[t].open()},o.prototype={firstRun:function(){o.container=t("<div>",{class:"modals-container"}),o.wrapper=t("<div>",{class:"modals-wrapper"}),o.overlay=t("<div>",{class:"modals-overlay"}),o.container.append(o.wrapper).append(o.overlay).appendTo(t("body")),o.list=[],o._initialized=!0,o.nextId=0,o.overlay.on("click",o.closeCurrent),t("body").on("click",".open-modal",(function(e){o.openModal(t(this).attr("href").substring(1)),e.preventDefault(),e.stopPropagation()})).on("keydown",(function(t){if(o.current&&27===t.which)o.closeCurrent(),t.stopPropagation();else if(o.current&&13===t.which&&("TEXTAREA"!==document.activeElement.tagName||t.ctrlKey)){var e=o.current.footer.find(".btn-submit").get(0);e&&e.click()}}))},init:function(){this.modal=this.options.modal||t("<div>",{class:"modal modal-flex"}),this.id=this.modal.attr("id")||"noid-"+o.nextId++,this.title=t("<div>",{class:"modal-title",text:this.options.title}),this.options.titleIcon&&this.title.addClass(this.options.titleIcon+" ico-after"),this.body=t("<div>",{class:"modal-body"}).append(this.options.body),this.footer=t("<div>",{class:"modal-footer"}).append(this.options.footer).append(t("<a>",{class:"btn btn-cancel",href:"#close-modal",text:this.options.closeText,click:function(t){o.closeCurrent(),t.preventDefault(),t.stopPropagation()}})),this.modal.addClass("tab-modalize").append(this.title,this.body,this.footer).appendTo(o.wrapper),o.list[this.id]=this},open:function(){o.current&&o.closeCurrent(),this.modal.addClass("open"),o.container.addClass("open"),o.current=this,this.body.find("input:visible, select, textarea").first().focus(),t("html").hasClass("enable-mobile-menu")||t("html").addClass("dropdown-active")},close:function(){o.closeCurrent()}},window.Modal=o,t(document).ready((function(){e(t(".modal")),t("#content").on("DOMNodeInserted",".modal",(function(o){e(t(o.target))}))}))}(jQuery);;
!function(t){"use strict";var i=function(e){this.options=t.extend({target:null,content:null},e),i._initialized||this.firstRun(),this.init()};i.prototype={firstRun:function(){i.container=t("<div>",{class:"tooltips-container"}),i.list=[],i.nextID=0,t("body").append(i.container),i._initialized=!0},init:function(){this.wrapper=t("<div>",{class:"tooltip-wrapper"}),this.elem=t("<div>",{class:"tooltip",id:"tooltip-"+i.nextID,role:"tooltip","aria-hidden":!0}),this.target=t(this.options.target),this.hasContent=!1,this.setOrientation("top"),this.setContent(this.options.content),this.hide(),this.wrapper.append(this.elem).appendTo(i.container),this.target.on("mouseover",this.mouseover.bind(this)),this.wrapper.on("mouseover",this.mouseover.bind(this)),this.target.on("mouseout",this.mouseout.bind(this)),this.wrapper.on("mouseout",this.mouseout.bind(this)),this.target.attr("aria-describedby","tooltip-"+i.nextID),this.hideTimeout=null,this.mouseon=!1,i.list.push(this),i.nextID++},mouseover:function(){this.mouseon||this.show(),this.mouseon=!0,clearTimeout(this.hideTimeout)},mouseout:function(){this.hideTimeout=setTimeout(this.hide.bind(this),50),this.mouseon=!1},setContent:function(i){Array.isArray(i)||(i=[i]),this.elem.empty(),this.hasContent=!1;for(var e=0;e<i.length;e++)i[e]&&(this.hasContent=!0,"string"==typeof i[e]?this.elem.append(document.createTextNode(t.trim(i[e]))):this.elem.append(i[e]));this.hasContent?this.mouseon&&this.show():this.hide()},hide:function(){this.wrapper.hide(),this.elem.attr("aria-hidden",!0)},show:function(){this.hasContent&&(this.wrapper.show(),this.elem.attr("aria-hidden",!1),this.recalc(),setTimeout(this.recalc.bind(this)))},guessOrientation:function(){this.target.offset().top-t(window).scrollTop()<this.wrapper.height()?this.setOrientation("bottom"):this.setOrientation("top")},recalc:function(){var t={top:null,bottom:null,left:this.target.offset().left+this.target.outerWidth()/2-this.wrapper.width()/2};this.guessOrientation(),"top"===this.orientation?t.top=this.target.offset().top-this.wrapper.outerHeight():"bottom"===this.orientation?t.top=this.target.offset().top+this.target.outerHeight():t.bottom=this.target.offset().top-this.wrapper.outerHeight()+8,this.wrapper.css(t)},setOrientation:function(t){"top"!==t&&"bottom"!==t||t===this.orientation||(this.wrapper.addClass(t),this.wrapper.removeClass(this.orientation),this.orientation=t)}},t.fn.tooltip=function(e){var o=t(this).data("tooltip");return o?e&&o.setContent(e):(o=new i({target:this,content:e}),t(this).data("tooltip",o)),o}}(jQuery);;
!function(i){"use strict";i("#accessibility a").on("focus",(function(){i(".dropdown:visible").parent().find(".active").removeClass("active"),i("#accessibility").addClass("focused")})).on("blur",(function(){i("#accessibility").removeClass("focused")})).on("click",(function(){var s=i(this).attr("href");setTimeout((function(){i(s).find(":tabbable").first().focus()}))}))}(jQuery);;
!function(n){"use strict";function t(t){n("h4 + ul, h4 + ol",t).each((function(){n(this).hasClass("unfolded")||0===n(".current",n(this)).length&&n(this).hide()})),n("h4",t).click((function(t){n("+ ul, + ol",n(this)).slideToggle(100),t.preventDefault(),t.stopPropagation()}))}n(document).ready((function(){n(".main .sidebar.accordeon, .main .sidebar .accordeon").each((function(){t(n(this))})).on("DOMNodeInserted",(function(e){t(n(e.target))}))}))}(jQuery);;
!function(t){"use strict";function e(){t("#mobile-menu [data-ajax-input]").each((function(){var e=t(this).data("ajax-input");t(this).text(t(".sidebar").find("button[data-ajax-input='"+e+"']").text())}))}t.fn.toggleText=function(e){var a=this.find(".a11y"),n=(a=0===a.length?this:t(a[0])).text(),i=this.data(e);a.text(i),this.data(e,n)},t(".sidebar, .flexpage-title-tool .actions").on("click","[data-ajax-input='follow-topic']",(function(a){var n=t(this),i=t(this).parents("form:first"),o=t(this).parents("li:first").next().find("[data-ajax-input='follow-topic-by-email']"),l=n.find("span#follow_text"),s=i.find("span#subscriber_count"),r=n.find("span#subscriber_plural"),c=t(n.attr("data-raw-subscriber-count"));0===o.length&&(o=t(this).parents(".buttons-combined").find("[data-ajax-input='follow-topic-by-email']")),o.prop("disabled",!0);var u=i.find("input[name=csrfmiddlewaretoken]").val(),p=i.find("input[name=topic]").val(),d=i.find("input[name=follow]").val(),f=i.find("input[name=page]").val();t.ajax({url:i.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:u,topic:p,follow:d,page:f},success:function(t){t.follow?i.find("input[name=follow]").val(1):(!1!==o.hasClass("blue")&&!0!==o.hasClass("is-following")||(o.toggleText("content-on-click"),o.addClass("blue").removeClass("is-following"),o.parents("form:first").find("input[name=email]").val(0)),i.find("input[name=follow]").val(0)),l.toggleText("content-on-click"),s.text(t.subscriberCount),r.text(t.subscriberCount>1?"s":""),c&&c.text(t.subscriberCount),n.toggleClass("blue yellow is-following"),n.blur(),e()},complete:function(){o.prop("disabled",!1)}}),a.stopPropagation(),a.preventDefault()})),t(".sidebar, .flexpage-title-tool .actions").on("click","[data-ajax-input='follow-topic-by-email']",(function(a){var n=t(this),i=t(this).parents("li:first").prev().find("[data-ajax-input='follow-topic']"),o=t(this).parents("form:first");0===i.length&&(i=t(this).parents(".buttons-combined").find("[data-ajax-input='follow-topic']")),i.prop("disabled",!0);var l=o.find("input[name=csrfmiddlewaretoken]").val(),s=o.find("input[name=topic]").val(),r=o.find("input[name=email]").val(),c=o.find("input[name=page]").val();t.ajax({url:o.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:l,topic:s,email:r,page:c},success:function(t){t.email?(!1!==i.hasClass("yellow")&&!1!==i.hasClass("is-following")||(i.toggleText("content-on-click"),i.removeClass("blue"),i.addClass("yellow is-following"),i.parents("form:first").find("input[name=follow]").val(1)),o.find("input[name=email]").val(1)):o.find("input[name=email]").val(0),n.toggleText("content-on-click"),n.toggleClass("blue, is-following"),n.blur(),e()},complete:function(){i.prop("disabled",!1)}}),a.stopPropagation(),a.preventDefault()})),t(".sidebar").on("click","[data-ajax-input='request-featured']",(function(a){var n=t(this),i=t(this).parents("form:first"),o=n.find("#request_text"),l=i.find("#featured_request_count"),s=n.find("#featured_request_plural"),r=i.find("input[name=csrfmiddlewaretoken]").val(),c=i.find("input[name=request_featured]").val();t.ajax({url:i.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:r,request_featured:c},success:function(t){o.toggleText("content-on-click"),l.text(t.newCount),s.text(t.newCount>1?"s":""),n.toggleClass("blue yellow"),e()}}),a.stopPropagation(),a.preventDefault()})),t(".sidebar").on("click","[data-ajax-input='solve-topic']",(function(a){var n=t(this),i=t(this).parents("form:first"),o=i.find("input[name=csrfmiddlewaretoken]").val(),l=i.find("input[name=topic]").val(),s=i.find("input[name=solved]").val(),r=i.find("input[name=page]").val();t.ajax({url:i.attr("action"),type:"POST",dataType:"json",data:{csrfmiddlewaretoken:o,topic:l,solved:s,page:r},success:function(a){a.solved?i.find("input[name=solved]").val(1):i.find("input[name=solved]").val(0),n.toggleText("content-on-click"),n.toggleClass("green blue"),t("[data-ajax-output='solve-topic']").html("Vous venez de marquer ce sujet comme résolu."),t("[data-ajax-output='solve-topic']").toggleClass("empty"),e()}}),a.stopPropagation(),a.preventDefault()})),t("#mobile-menu").on("click","[data-ajax-input]",(function(e){var a=t(this).data("ajax-input"),n=t(".sidebar").find("button[data-ajax-input='"+a+"']");n[0]&&(t(this).toggleText("content-on-click"),n.click(),e.stopPropagation(),e.preventDefault())})),t(".message-actions").on("click","[data-ajax-input='cite-message']",(function(e){e.stopPropagation(),e.preventDefault();var a=t(this),n=document.querySelector(".md-editor");t.ajax({url:a.attr("href"),dataType:"json",success:function(t){"new"===localStorage.getItem("editor_choice")?function(t,e){const a=window.editors[t.id].codemirror,n=a.getDoc(),i=n.getCursor();""===a.getValue()?(a.setValue(e+"\n\n"),a.setCursor(a.lineCount(),0)):a.somethingSelected()?n.replaceSelection("\n\n"+e+"\n\n"):n.replaceRange("\n\n"+e+"\n\n",i),a.focus()}(n,t.text):function(t,e){if(""!==t.value)if(t.selectionStart!==t.selectionEnd||(a=t.value,n=t.selectionStart,(a.slice(0,n).split("\n").slice(-1)[0]||"")+(a.slice(n).split("\n")[0]||"")).trim())t.value=t.value+"\n\n"+e;else{var a,n,i=t.value.slice(0,t.selectionStart),o=t.value.slice(t.selectionEnd);t.value=i+"\n"+e+"\n"+o}else t.value=e+"\n\n"}(n,t.text)}}),"new"===localStorage.getItem("editor_choice")?t("html, body").animate({scrollTop:t(n).siblings(".CodeMirror").offset().top},500):(t("html, body").animate({scrollTop:t(n).offset().top},500),n.focus())})),t(".topic-message").on("click","[data-ajax-input='mark-message-as-useful']",(function(e){var a=t(this),n=a.parents("form:first"),i=n.parents("article"),o=i.find("[data-ajax-output='mark-message-as-useful']"),l=n.find("input[name=csrfmiddlewaretoken]").val();t.ajax({url:n.attr("action"),type:"POST",data:{csrfmiddlewaretoken:l},success:function(){i.toggleClass("helpful"),a.toggleText("content-on-click"),o.toggleClass("hidden"),a.blur()}}),e.stopPropagation(),e.preventDefault()})),t(".topic-message").on("click","[data-ajax-input='mark-message-as-potential-spam']",(function(e){var a=t(this),n=a.parents("form:first"),i=n.parents("article"),o=i.find("[data-ajax-output='mark-message-as-potential-spam']"),l=n.find("input[name=csrfmiddlewaretoken]").val();t.ajax({url:n.attr("action"),type:"POST",data:{csrfmiddlewaretoken:l},success:function(){i.toggleClass("potential-spam"),a.toggleText("content-on-click"),o.toggleClass("hidden"),a.blur()}}),e.stopPropagation(),e.preventDefault()}))}(jQuery);;
!function(t){"use strict";function i(i,e){this.$wrapper=function(i){var e=t(i),o=t("<div/>",{class:"autocomplete-wrapper"}),n=t("<div/>",{class:"autocomplete-dropdown"});return e.addClass("autocomplete-input").attr("autocomplete","off").wrap(o).parent().append(n)}(t(i)),this.$input=this.$wrapper.find(".autocomplete-input"),this.$dropdown=this.$wrapper.find(".autocomplete-dropdown"),this.$input.on("keyup",this.handleInput.bind(this)),this.$input.on("keydown",this.handleKeydown.bind(this)),this.$input.on("blur",this.hideDropdown.bind(this)),this.options=e,"multiple"!==this.options.type&&"multiple_checkbox"!==this.options.type||(this.$form=this.$wrapper.parents("form:first"),this.$form.on("submit",this.handleSubmit.bind(this)),"multiple_checkbox"===this.options.type&&(this.$excluded=this.$form.find(".excluded_field"))),this.options.clickable&&this.$dropdown.css("font-weight","bold"),this.selected=-1,this._lastInput=""}i.prototype={cache:{},handleKeydown:function(t){var i;switch(t.which){case 38:t.preventDefault(),t.stopPropagation(),-1===this.selected?this.select(this.$dropdown.find("ul li").last().attr("data-autocomplete-id")):(i=this.$dropdown.find("ul li[data-autocomplete-id="+this.selected+"]").prev("li"),this.select(1===i.length?i.attr("data-autocomplete-id"):-1));break;case 40:t.preventDefault(),t.stopPropagation(),-1===this.selected?this.select(this.$dropdown.find("ul li").first().attr("data-autocomplete-id")):(i=this.$dropdown.find("ul li[data-autocomplete-id="+this.selected+"]").next("li"),this.select(1===i.length?i.attr("data-autocomplete-id"):-1));break;case 13:t.ctrlKey||(t.preventDefault(),t.stopPropagation(),this.enter())}},handleInput:function(t){!t||38!==t.which&&40!==t.which&&13!==t.which||(t.preventDefault(),t.stopPropagation());var i=this.$input.val();if(this._lastInput!==i){this._lastInput=i;var e=this.parseInput(i),o=this;if(e&&e!==this._lastAutocomplete){if(!this.options.minLength||e.length>=this.options.minLength){let t;t="multiple_checkbox"===this.options.type?this.fetchData(e,this.$excluded.val()):this.fetchData(e,""),t.done((function(t){o.updateCache(t.results),o.updateDropdown(o.sortList(t.results,e))})).fail((function(){console.error("[Autocompletition] Something went wrong...")})),this.updateDropdown(this.sortList(this.searchCache(e),e)),this.showDropdown()}}else this.hideDropdown()}},handleSubmit:function(){var t=this.$input.val();", "===t.slice(-2)&&this.$input.val(t.slice(0,-2))},showDropdown:function(){this.$input.is("input")&&this.$dropdown.css("width",this.$input.outerWidth()),this.$dropdown.show()},hideDropdown:function(){this.$dropdown.hide()},select:function(t){this.selected=t,this.$dropdown.find("ul li.active").removeClass("active"),this.$dropdown.find("ul li[data-autocomplete-id="+this.selected+"]").addClass("active")},enter:function(t){t=t||this.selected;var i=this.$input.val();if((","===i.substr(-1)||-1===t)&&"multiple"===this.options.type)return!1;var e=this.getFromCache(t);if(!e)return!1;if("multiple"===this.options.type){var o=i.lastIndexOf(",");-1!==o?(i=i.substr(0,o)+", "+e[this.options.fieldname]+", ",this.$input.val(i)):this.$input.val(e[this.options.fieldname]+", ")}else"single"===this.options.type?this.$input.val(e[this.options.fieldname]):"multiple_checkbox"===this.options.type&&(this.$input.before("<label class='checkbox' for='id_options_"+e.id+"'> <input type='checkbox' checked='checked' name='options' id='id_options_"+e.id+"' value='"+e.id+"'>"+e[this.options.fieldname]+"</label>"),this.$excluded.val(this.$excluded.val()+","+e.id),this.$input.val(""));this._lastAutocomplete=e[this.options.fieldname],this.selected=-1,this.$input.trigger("input"),this.options.clickable&&window.open(e.url,"_blank")},updateCache:function(t){for(var i=0;i<t.length;i++)this.cache[t[i][this.options.fieldname]]=t[i]},extractWords:function(i){return t.grep(t.map(i.split(","),t.trim),(function(t){return""===t||void 0===t}),!0)},parseInput:function(t){if("multiple"===this.options.type){if(","===t.substr(-1)||", "===t.substr(-2))return!1;var i=this.extractWords(t);return 0!==i.length&&i[i.length-1]}return t},searchCache:function(i){var e=new RegExp(i,"ig");return t.grep(this.cache,(function(t){return t.this.options.fieldname.match(e)}))},getFromCache:function(t){for(var i in this.cache)if(parseInt(this.cache[i].id)===parseInt(t))return this.cache[i];return!1},filterData:function(t,i){var e=this.options.fieldname;return t.filter((function(t){return-1===i.indexOf(t[e])}))},updateDropdown:function(i){var e=this,o=function(i){i.preventDefault(),i.stopPropagation(),e.enter(t(this).attr("data-autocomplete-id")),e.$input.focus(),e.handleInput()};(i=e.filterData(i,e.extractWords(this.$input.val()))).length>this.options.limit&&(i=i.slice(0,this.options.limit));var n,s=t("<ul>"),a=!1;for(var h in i)t("#my-account .username").text()!==i[h][this.options.fieldname]&&((n=t("<li>").text(i[h][this.options.fieldname])).attr("data-autocomplete-id",i[h].id),i[h].id===this.selected&&(n.addClass("active"),a=!0),n.mousedown(o),s.append(n));this.$dropdown.children().remove(),this.options.header&&s[0].childElementCount&&this.$dropdown.append('<div class="autocomplete-dropdown-header">'+this.options.header+"</div>"),this.$dropdown.append(s),a||this.select(s.find("li").first().attr("data-autocomplete-id"))},sortList:function(t,i){for(var e=[],o=[],n=0;n<t.length;n++)0===t[n][this.options.fieldname].indexOf(i)?e.push(t[n]):o.push(t[n]);var s=function(t,i){var e=t[this.options.fieldname].toLowerCase(),o=i[this.options.fieldname].toLowerCase();return e<o?-1:e>o?1:0};return e.sort(s.bind(this)),o.sort(s.bind(this)),e.concat(o)},fetchData:function(i,e){var o=this.options.url.replace("%s",i);return o=o.replace("%e",e),t.getJSON(o)}},t.fn.autocomplete=function(e){return e||(e=t(this).data("autocomplete")),new i(this,t.extend({type:"single",url:"/api/membres/?search=%s",limit:4,fieldname:"username"},e))},t(document).ready((function(){t("[data-autocomplete]").each((function(){t(this).data&&t(this).autocomplete()}))}))}(jQuery);;
!function(e){"use strict";function a(e,a,t){var r,n,i,o,s,h,c,l;if(e=Math.max(0,Math.min(360,e)),a=Math.max(0,Math.min(100,a)),t=Math.max(0,Math.min(100,t)),t/=100,0===(a/=100))return r=n=i=t,[Math.round(255*r),Math.round(255*n),Math.round(255*i)];switch(h=t*(1-a),c=t*(1-a*(s=(e/=60)-(o=Math.floor(e)))),l=t*(1-a*(1-s)),o){case 0:r=t,n=l,i=h;break;case 1:r=c,n=t,i=h;break;case 2:r=h,n=t,i=l;break;case 3:r=h,n=c,i=t;break;case 4:r=l,n=h,i=t;break;default:r=t,n=h,i=c}return[Math.round(255*r),Math.round(255*n),Math.round(255*i)]}var t={scales:{xAxes:[{type:"time",time:{parser:"DD/MM/YYYY",displayFormats:{hour:"DD MMM",day:"DD MMM",week:"DD MMM",month:"MMM YYYY",quarter:"MMM YYYY",year:"YYYY"}}}],yAxes:[{ticks:{beginAtZero:!0}}]},responsive:!0},r=[];function n(e,n){var i=e.data("time"),o=[];i.forEach((function(e){o.push(window.moment(e).format("DD/MM/YYYY"))}));var s=e.data(),h=[],c=0;for(var l in s)l.indexOf("views")>-1&&c++;var g=0;for(var u in s)if(u.indexOf("views")>-1){var p=e.data("label-"+u),f=a(g,100,80);h.push({label:p,data:n?s[u].map(n):s[u],fill:!1,backgroundColor:"rgba("+f.join(",")+", 1)",borderColor:"rgba("+f.join(",")+", 0.70)",lineTension:0}),g+=360/c}var M={type:localStorage.getItem("graphType"),data:{labels:o,datasets:h},options:t};r.push(new window.Chart(e,M))}function i(){e("#view-graph").length&&n(e("#view-graph")),e("#visit-time-graph").length&&n(e("#visit-time-graph"),Math.round),e("#users-graph").length&&n(e("#users-graph")),e("#new-users-graph").length&&n(e("#new-users-graph")),e("#sessions-graph").length&&n(e("#sessions-graph"))}function o(a){e(".tabcontent").each((function(){e(this).hide()})),e(".tablinks").each((function(){e(this).removeClass("active")})),e("#"+e(a).attr("id")+"-content").show(),e(a).addClass("active")}localStorage.getItem("graphType")||localStorage.setItem("graphType","line"),e("#graph_type_toogle").click((function(){"line"===localStorage.getItem("graphType")?(localStorage.setItem("graphType","bar"),e(this).text("Afficher une courbe")):(localStorage.setItem("graphType","line"),e(this).text("Afficher un histogramme")),r.forEach((function(e){e.destroy()})),i()})),e("#graph_type_toogle").text("line"===localStorage.getItem("graphType")?"Afficher un histogramme":"Afficher une courbe"),i(),e(".tablinks").each((function(){e(this).click((function(){o(e(this))}))})),o(e(".tablinks").first())}(jQuery);;
!function(t){"use strict";t(".main").on("click",".close-alert-box:not(.open-modal)",(function(e){t(this).parents(".alert-box:first").slideUp(150,(function(){t(this).remove()})),t(this).parents(".markdown-help:first").slideUp(150,(function(){t(this).remove()})),e.preventDefault()}))}(jQuery);;
!function(e){"use strict";function n(e){var n=e.parent().parent();"compare-from"===e.attr("name")?(n.prevAll().find("[name='compare-to']").prop("disabled",!1),n.nextAll().find("[name='compare-to']").prop("disabled",!0),n.find("[name='compare-to']").prop("disabled",!0)):(n.prevAll().find("[name='compare-from']").prop("disabled",!0),n.nextAll().find("[name='compare-from']").prop("disabled",!1),n.find("[name='compare-from']").prop("disabled",!0))}e(".commits-list input[name^='compare']").on("change",(function(){n(e(this))})),e(document).ready((function(){e(".commits-list input[name^='compare']:checked").each((function(){n(e(this))}))})),e(".commits-compare-form").on("submit",(function(){var n=e(this),m=n.find("input[name='from']"),o=n.find("input[name='to']"),a=e(".commits-list input[name='compare-from']:checked").val(),i=e(".commits-list input[name='compare-to']:checked").val();m.val(a),o.val(i)}))}(jQuery);;
!function(){const e=document.getElementById("exports-modal");if(!e)return;const t=document.querySelector("[data-exports-api]"),n=e.querySelector("section.exports"),r=e.querySelector("footer button.btn"),a=t.dataset.exportsApi,s=t.dataset.requestExportApi,i=n.dataset,o=new Intl.DateTimeFormat("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),d=new Intl.DateTimeFormat("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});function c(e){n.classList.add("is-empty");const t=document.createElement("p");t.innerHTML=e,n.innerHTML="",n.appendChild(t)}function l(){return fetch(a).then(e=>e.json()).then(e=>{if(0===e.length)return void c(i.trNoExports);const t=["pdf","epub"];e.sort((e,n)=>{const r=t.indexOf(e.format_requested),a=t.indexOf(n.format_requested),s=-1!==r,i=-1!==a;return s&&!i?-1:!s&&i?1:s&&i?r-a:e.format_requested.localeCompare(n.format_requested)}),n.classList.remove("is-empty"),n.innerHTML="";for(const t of e){const e=document.createElement("article"),r=document.createElement("header"),a=document.createElement("h4"),s=document.createElement("p"),c=document.createElement("footer"),l=t.state_of_processing.toLowerCase(),u=new Date(t.date);if(e.classList.add("export"),e.classList.add(`is-${l}`),a.innerText=i["trFormat"+t.format_requested]||t.format_requested,s.setAttribute("title",d.format(u)),s.innerText=o.format(u)+("success"===l?" – ":""),"success"===l){const e=document.createElement("a");e.setAttribute("title",i.trDownloadTitle),e.innerText=i.trDownload,e.setAttribute("href",t.url),s.appendChild(e)}c.innerText=i[`trState${l}`],r.appendChild(a),r.appendChild(s),e.appendChild(r),e.appendChild(c),n.appendChild(e)}u(e)}).catch(()=>{c(i.trErrorLoading),u()})}function u(t){let n=e.classList.contains("open");t&&(n&=t.filter(e=>"REQUESTED"===e.state_of_processing||"RUNNING"===e.state_of_processing).length>0),n&&setTimeout(l,4e3)}function m(e,t){r.classList.remove("disabled"),r.classList.remove("submitted"),r.setAttribute("disabled","disabled"),r.innerText=e,setTimeout(()=>{r.removeAttribute("disabled"),r.innerText=r.dataset.initialLabel},1e3*t)}r.dataset.initialLabel=r.innerText,t.addEventListener("click",()=>{l(),t.blur()}),r.addEventListener("click",(function(){r.setAttribute("disabled","disabled"),r.classList.add("disabled"),r.classList.add("submitted"),r.innerText=i.trGenerationWaiting;const e=document.createElement("div");e.classList.add("line-loading"),r.appendChild(e),fetch(s,{method:"POST",headers:new Headers({"X-CSRFToken":r.dataset.csrf})}).then(()=>{m(i.trGenerationRequested,120),l()}).catch(e=>{console.error("Cannot request exports update",e),m(i.trGenerationErrored,5)})}))}();;
!function(t){function e(t,e){const a=t[0].classList;a.toggle("selected",e),a.toggle("ico-after",e),a.toggle("tick",e),a.toggle("green",e),t.attr("data-activated",e.toString()),t.blur(),t.parent().find('input[name="activated"]').val((!e).toString())}t(".help-toggle").click(a=>{a.preventDefault();const r=t(a.target),n=r.parent(),c=n.serialize(),i="true"!==r.attr("data-activated");e(r,i),t.ajax(n.attr("action"),{method:"POST",data:c,success:t=>e(r,t.help_wanted),error:()=>e(r,!i)})})}(jQuery);;
!function(a){a(".readiness").on("click",(function(t){var e=a(t.target).data("url"),r="true"===a(t.target).data("is-ready").toString(),n=a("input[name=csrfmiddlewaretoken]").val(),i=!r;a.ajax(e,{method:"PUT",data:{ready_to_publish:i,container_slug:a(t.target).data("container-slug"),parent_container_slug:a(t.target).data("parent-container-slug")||""},success:function(){var e=String(i),r=a(t.target).data("is-ready-"+e);a(t.target).attr("data-is-ready",e).text(r)},headers:{"X-CSRFToken":n}})}))}(jQuery);;
!function(n){"use strict";var t=!1,o=!1;function e(){return n(".header-menu").is("[data-hovering-mode]")}var i=n(".dropdown").map((function(i,r){return function(i){var r,u=i.parent(),f=u.find("> a");function a(){s(),n("body").trigger("click"),f.addClass("active"),i.find(".dropdown-list").scrollTop(0)}function s(){r&&(clearTimeout(r),r=null)}function l(){s(),f.removeClass("active")}return i.on("click",(function(n){n.stopPropagation()})),u.on("mouseenter",(function(){e()&&a()})).on("mouseleave",(function(){e()&&function(){if(r)return;r=setTimeout(l,200)}()})).on("keydown",(function(n){"ArrowRight"===n.key&&(n.preventDefault(),c(f[0],u[0],1)),"ArrowLeft"===n.key&&(n.preventDefault(),c(f[0],u[0],-1))})),f.on("mousedown",(function(){t=!0})).on("mouseup",(function(){t=!1})).on("click",(function(n){e()||(n.preventDefault(),n.stopPropagation(),f.hasClass("active")?l():a())})).on("focus",(function(n){n.preventDefault(),t||f.hasClass("active")||(a(),o||i.find(":tabbable:first").focus())})),{open:a,close:l,$container:u}}(n(r))}));function r(){i.each((function(n,t){t.close()}))}function u(){return n(document.activeElement).parents().filter((function(n,t){return function(n){for(var t=0;t<i.length;t++)if(i[t].$container[0]===n)return!0;return!1}(t)})).length}function c(t,o,e){var i=function(t){for(var o=n(":tabbable"),e=0;e<o.length;e++)if(o[e]===t)return e;return-1}(t);if(-1!==i)for(var u=n(":tabbable"),c=i+e;c<u.length;c+=e)if(!o.contains(u[c]))return r(),void u[c].focus()}n("body").on("click",r).on("keydown",(function(n){"Tab"===n.key&&setTimeout((function(){u()||r()}),5)})),n(document).on("keydown keyup",(function(n){o=n.shiftKey}))}(jQuery);;
"use strict";function toggleSubmitButtonsState(){$("button[type=submit]").each((t,e)=>{$(e).prop("disabled",!$(e).prop("disabled"))})}function saveFormNoRedirect(t,e){const a=t.serialize();a.preview=void 0,toggleSubmitButtonsState(),e.removeClass("btn-cancel"),$.ajax(t.attr("action"),{method:"POST",data:a,success:a=>{toggleSubmitButtonsState(),$("input[name=last_hash]").val(a.last_hash),e.addClass("btn-submit"),t.attr("action",a.new_url),setTimeout(()=>e.removeClass("btn-submit"),5e3)},error:()=>{toggleSubmitButtonsState(),e.addClass("btn-cancel")}})}!function(t){t(".inline-save-button").click(e=>{const a=t(e.target.form);return e.preventDefault(),e.stopPropagation(),saveFormNoRedirect(a,t(e.target)),!0})}(jQuery);;
!function(e){"use strict";let t=localStorage.getItem("editor_choice");(!t||"old"!==t&&"new"!==t)&&(localStorage.setItem("editor_choice","old"),t="old"),e(".md-editor").each((function(){let o,i,l;"old"===t?(o=["Vous utilisez actuellement notre éditeur historique. Nous sommes en train de développer un nouvel éditeur"," encore au stade expérimental."],i="Essayer le nouvel éditeur.",l="new"):(o="Vous utilisez actuellement notre nouvel éditeur. Attention, il est au stade expérimental !",i="Revenir à l'éditeur historique.",l="old"),e('<div class="markdown-help">'+o+' <a href="'+("javascript:localStorage.setItem('editor_choice', '"+l+"');document.location.reload(true);")+'">'+i+"</a></div>").insertBefore(this)}))}(jQuery);;
function mirroringEasyMDE(e,t){const a=$("<textarea></textarea>");return a.attr({"data-antidoteapi_jsconnect_groupe_id":"01",placeholder:t.placeholder,class:"textarea-multivers",style:"display: none;"}),a.val(e.codemirror.getValue()),a.on("change input",(function(){e.codemirror.setValue(a.val())})),e.codemirror.on("change",(function(e){a.val(e.getValue())})),a.on("mousedown select keyup blur",(function(){setTimeout(()=>{const t=e.codemirror,i=convertAbsolute2CmPosition(t,a[0].selectionStart),r=convertAbsolute2CmPosition(t,a[0].selectionEnd);t.setSelection(i,r)},12)})),$(e.element.parentElement).find(".editor-statusbar").before(a),a}function getPositionConverterArray(e){const t=e.split("\n"),a=t.map((e,t)=>e.length);return(e=>{for(let i=0,r=0;i<t.length;i++,r+=a[i-1]+1)e.push(r);return e})([])}function convertCm2AbsolutePosition(e,t){return getPositionConverterArray(e.getValue())[t.line]+t.ch}function convertAbsolute2CmPosition(e,t){const a=getPositionConverterArray(e.getValue()),i=a.findIndex(e=>e>t),r=(i>-1?i:a.length)-1;return{line:r,ch:t-a[r]}}function spellcheckerEasyMDE(e){$(e.toolbarElements["abc-spellchecker"]).attr({"data-antidoteapi_jsconnect_groupe_id":"01","data-antidoteapi_jsconnect_lanceoutil":"C"});const t=e.codemirror.display.lineDiv;if($(t).attr({"data-grammalecte_button":!1,"data-grammalecte_result_via_event":!0}),t.addEventListener("GrammalecteResult",(function(t){const a="string"==typeof t.detail&&JSON.parse(t.detail);a&&"text"===a.sType&&e.codemirror.setValue(a.sText)})),"object"==typeof oGrammalecteAPI&&null!==oGrammalecteAPI||($(e.toolbarElements["abc-grammalecte"]).hide(),document.addEventListener("GrammalecteLoaded",(function(t){$(e.toolbarElements["abc-grammalecte"]).show()}))),"function"==typeof estPresentAntidoteAPI_JSConnect&&estPresentAntidoteAPI_JSConnect()?activeAntidoteAPI_JSConnect():$(e.toolbarElements["abc-spellchecker"]).hide(),!window.thereIsAlreadyAStalkerOnThisPage){window.thereIsAlreadyAStalkerOnThisPage=!0;const t=new MutationObserver((function(a){a.forEach(a=>{"attributes"===a.type&&"data-antidoteapi_jsconnect_initlistener"===a.attributeName&&($(e.toolbarElements["abc-spellchecker"]).show(),t.disconnect())})}));setTimeout(()=>t.disconnect(),3e4),t.observe(e.toolbarElements["abc-spellchecker"],{attributes:!0})}}!function(e){"use strict";const t=e(".inline-save-button");if("new"!==localStorage.getItem("editor_choice"))return;!function(){const e=localStorage.getItem("savedEditorText"),t=e?JSON.parse(e):[];for(const e in t)localStorage.setItem("smde_"+t[e].id,t[e].value);localStorage.removeItem("savedEditorText")}(),e(".message-bottom [data-ajax-input='preview-message'], .preview-btn").on("click",(function(t){t.stopPropagation(),t.preventDefault();var a,i=e(this),r=i.parents("form:first");a=r.find(".preview-source").length?i.closest("div").prev().find(".md-editor").prop("id"):r.find(".md-editor").prop("id");var n=window.editors[a].value(),o=r.find("input[name=csrfmiddlewaretoken]").val(),l=r.find("input[name=last_post]").val();e.ajax({url:r.attr("action"),type:"POST",data:{csrfmiddlewaretoken:o,text:n,last_post:l,preview:"preview"},success:function(t){e(".previsualisation").remove(),r.find(".preview-source").length?e(t).insertAfter(i):e(t).insertAfter(r)}})}));const a=99999999999,i=e("input[name=csrfmiddlewaretoken]").val();function r(e,t){var a=String(e).match(t);if(a)return a.length>0}function n(e,t,i){var r,n;const o=e.lastLine();for(var l=t;l<=o+1;l++)n=e.getLine(l),l===t?e.replaceRange(i,{line:l,ch:0},{line:l,ch:a}):e.replaceRange(r,{line:l,ch:0},{line:l,ch:a}),r=n,l===o&&(r=e.lineSeparator()+r)}function o(e,t,i,r,n,o){let l,s,c,d;const m=e.getLine(n.line);c=m.slice(0,n.ch),d=m.slice(n.ch);var u=0;if("blocInformation"===t||"blocQuestion"===t||"blocError"===t||"blocSecret"===t||"blocNeutral"===t)!function(e,t,i){for(var r=t+1;r<=i;r++)e.replaceRange(e.getLine(r).slice(2),{line:r,ch:0},{line:r,ch:a});e.replaceRange("",{line:t,ch:0},{line:t+1,ch:0})}(e,n.line,o.line),n.ch=0;else if("checklist"===t){for(l=n.line;l<=o.line;l++)e.replaceRange(e.getLine(l).slice(i.length),{line:l,ch:0},{line:l,ch:a});o.ch-=i.length}else{const i=/(->)(\s*)/;"keyboard"===t?(c=c.replace(/(\|\|)(?![\s\S]*(\|\|))/,""),d=d.replace(/(\|\|)/,""),u=2):"codeInline"===t?(c=c.replace(/(`)(?![\s\S]*(`))/,""),d=d.replace(/(`)/,""),u=1):"subscript"===t?(c=c.replace(/(~)(?![\s\S]*(~))/,""),d=d.replace(/(~)/,""),u=1):"superscript"===t?(c=c.replace(/(\^)(?![\s\S]*(\^))/,""),d=d.replace(/(\^)/,""),u=1):"alignRight"===t?(s=i.exec(c),c=c.replace(/(->)(\s*)/,""),d=d.replace(/(\s*)(->)/,""),u=s[0].length):"alignCenter"===t?(s=i.exec(c),c=c.replace(/(->)(\s*)/,""),d=d.replace(/(\s*)(<-)/,""),u=s[0].length):"math"===t&&(c=c.replace(/(\$\$)(?![\s\S]*(\$\$))/,""),d=d.replace(/(\$\$)/,""),u=2),e.replaceRange(c+d,{line:n.line,ch:0},{line:n.line,ch:a}),n.ch-=u,n!==o&&(o.ch-=u)}}function l(e,t,i,l){if(/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className))return;l=void 0===l?i:l;const s=e.codemirror,c=function(e){var t,a=e.getCursor("start"),i=e.getCursor("end"),n=e.getLine(a.line),o={},l=n.slice(0,a.ch).match(/^(\S)+/g),s=n.slice(i.ch).match(/(\S)+$/g);if(l&&s)r(l,/(.*)*\|\|$/)&&r(s,/^\|\|(.*)*/)?o.keyboard=!0:r(l,/(.*)`|$/)&&r(s,/^`(.*)/)?o.codeInline=!0:r(l,/(.*)~$/)&&r(s,/^~(.*)/)?o.subscript=!0:r(l,/(.*)\^$/)&&r(s,/^\^(.*)/)?o.superscript=!0:r(l,/^->($|\s)+/)&&r(s,/(^|\s)+->$/)?o.alignRight=!0:r(l,/^->($|\s)+/)&&r(s,/(^|\s)+<-$/)?o.alignCenter=!0:r(l,/^\$\$($|\s)+/)&&r(s,/(^|\s)+\$\$$/)&&(o.math=!0);else if(r(n,/^\[\[(.+)\]\]$/)){var c=!0;for(t=a.line+1;t<=i.line;t++)if(!e.getLine(t).startsWith("| ")&&""!==e.getLine(t)){c=!1;break}if(c){const e=/^\[\[(.+)\]\]$/.exec(n)[1].split("|")[0].trim();"i"===e||"information"===e?o.blocInformation=!0:"q"===e||"question"===e?o.blocQuestion=!0:"e"===e||"erreur"===e?o.blocError=!0:"s"===e||"secret"===e?o.blocSecret=!0:"n"!==e&&"neutre"!==e||(o.blocNeutral=!0)}}else{var d=!0;if(a.line!==i.line||a.ch!==i.ch){for(t=a.line;t<=i.line;t++)if(!e.getLine(t).match(/^- \[(.{1})\](\s*)/)&&""!==e.getLine(t)){d=!1;break}d&&(o.checklist=!0)}}return o}(s),d=i,m=l,u=s.getCursor("start"),p=s.getCursor("end");c[t]?o(s,t,d,0,u,p):function(e,t,i,r,o,l){let s,c;if("blocInformation"===t||"blocQuestion"===t||"blocError"===t||"blocSecret"===t||"blocNeutral"===t){for(s=o.line;s<=l.line;s++)c=i+e.getLine(s),e.replaceRange(c,{line:s,ch:0},{line:s,ch:a});"blocInformation"===t?n(e,o.line,"[[information]]"):"blocQuestion"===t?n(e,o.line,"[[question]]"):"blocError"===t?n(e,o.line,"[[erreur]]"):"blocSecret"===t?n(e,o.line,"[[secret]]"):"blocNeutral"===t&&n(e,o.line,"[[neutre|titre]]"),o.ch=0,l.line+=1,l.ch=l.line.length}else if("checklist"===t){for(s=o.line;s<=l.line;s++)c=i+e.getLine(s),e.replaceRange(c,{line:s,ch:0},{line:s,ch:a});l.ch+=i.length}else c=e.getSelection(),"keyboard"===t?c=c.split("||").join(""):"codeInline"===t?c=c.split("`").join(""):"subscript"===t?c=c.split("~").join(""):"superscript"===t?c=c.split("^").join(""):"alignRight"===t?c=c.split("-> ").join(""):"alignCenter"===t?c=c.split("-> ").join("").split(" <-").join(""):"math"===t&&(c=c.split("$$").join("")),e.replaceSelection(i+c+r),o.ch+=i.length,l.ch=o.ch+c.length}(s,t,d,m,u,p),s.setSelection(u,p),s.focus()}window.editors={};var s=function(t,a,r){const n="/api/galeries/"+document.body.getAttribute("data-gallery")+"/images/";var o=new FormData;o.append("physical",t),o.append("title",t.name),e.ajax({url:n,data:o,type:"POST",processData:!1,contentType:!1,headers:{"X-CSRFToken":i},dataType:"json"}).done((function(e){a(e.url)})).fail((function(e){var t="Erreur inconnue";void 0!==e.responseText&&-1!==e.responseText.indexOf("RequestDataTooBig")?t="L'image est trop lourde.":void 0!==e.responseJSON?t=e.responseJSON[0]:void 0!==e.responseText?t=400===parseInt(e.status)?"Quelque chose s'est mal passé lors de l'envoi. Votre image est peut-être trop lourde.":"Erreur "+e.status+" "+e.statusText+" : '"+e.responseText.split("\n")[0]+"'":0===e.readyState&&"error"===e.statusText&&(t="Oups ! Impossible de se connecter au serveur."),r(t)}))};e(".md-editor").each((function(){var r=this,n=e(this).closest("form");const o=(window.location.pathname+window.location.search+"@"+this.getAttribute("name")).replace(/[?|&]page=(\d+)/g,""),c=localStorage.getItem("smde_"+o);let d=500;e(this).hasClass("mini-editor")&&(d=200);var m=new EasyMDE({autoDownloadFontAwesome:!1,element:this,forceSync:!0,autosave:{enabled:!0,uniqueId:o,delay:1e3},indentWithTabs:!1,minHeight:d+"px",placeholder:"Votre message au format Markdown",promptURLs:!0,promptTexts:{image:"Url de votre image",link:"Url de votre lien"},uploadImage:!0,imageUploadFunction:s,imageTexts:{sbInit:"Joindre des images par glisser-déposer ou coller depuis le presse-papiers.",sbOnDragEnter:"Déposez l'image pour l'envoyer dans votre galerie.",sbOnDrop:"Téléchargement d'images #images_names#",sbProgress:"Téléchargement #file_name#: #progress#%",sbOnUploaded:"Image téléchargée #image_name#"},spellChecker:!1,inputStyle:"contenteditable",nativeSpellcheck:!0,sideBySideFullscreen:!1,promptAbbrv:!0,theme:"idea",previewRender:function(t,a){var o=window.editors[r.id];return clearTimeout(o.timeout),o.timeout=setTimeout((function(){e.ajax({url:n.attr("action"),type:"POST",data:{csrfmiddlewaretoken:i,text:t,last_post:"",preview:"preview"},success:function(e){a.innerHTML=e},async:!0})}),600),o.previous_value=t,null},syncSideBySidePreviewScroll:!1,toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"fa fa-bold",title:"Gras"},{name:"italic",action:EasyMDE.toggleItalic,className:"fa fa-italic",title:"Italique"},{name:"strikethrough",action:EasyMDE.toggleStrikethrough,className:"fa fa-strikethrough",title:"Barré"},{name:"abbr",action:e=>{var t=e.options,i=e.codemirror,r=i.getSelection(),n="",o=i.lastLine(),l=i.getLine(o).length,s=i.getCursor("start"),c=i.getCursor("end");if(t.promptAbbrv){if(0===r.length&&0===(r=prompt("Mot abrégé","")).length)return!1;n=prompt("Description de l'abbréviation","")}i.replaceRange(i.lineSeparator()+i.lineSeparator()+"*["+r+"]: "+n,{line:o,ch:l},{line:o,ch:a}),i.setSelection(s,c),i.focus()},className:"fa fa-text-width",title:"Abbréviation"},{name:"keyboard",action:e=>{l(e,"keyboard","||")},className:"far fa-keyboard",title:"Touche clavier"},{name:"codeInline",action:e=>{l(e,"codeInline","`")},className:"fa fa-terminal",title:"Code inline"},"|",{name:"superscript",action:e=>{l(e,"superscript","^")},className:"fa fa-superscript",title:"Exposant"},{name:"subscript",action:e=>{l(e,"subscript","~")},className:"fa fa-subscript",title:"Indice"},"|",{name:"alignCenter",action:e=>{l(e,"alignCenter","-> "," <-")},className:"fa fa-align-center",title:"Aligner au centre"},{name:"alignRight",action:e=>{l(e,"alignRight","-> "," ->")},className:"fa fa-align-right",title:"Aligner a droite"},"|",{name:"list-ul",action:EasyMDE.toggleUnorderedList,className:"fa fa-list-ul",title:"Liste à puces"},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Liste ordonnée"},{name:"checklist",action:e=>{l(e,"checklist","- [ ] ")},className:"far fa-check-square",title:"Liste de taches"},"|",{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"fas fa-heading",title:"Titres"},"|",{name:"image",action:EasyMDE.drawImage,className:"far fa-image",title:"Image"},{name:"link_btn",action:EasyMDE.drawLink,className:"fa fa-link",title:"Lien"},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"fa fa-quote-left",title:"Citation"},{name:"code",action:EasyMDE.toggleCodeBlock,className:"fa fa-code",title:"Bloc de code coloré"},{name:"math",action:e=>{l(e,"math","$$")},className:"fa fa-percent",title:"Formule mathématique"},{name:"table",action:EasyMDE.drawTable,className:"fa fa-table",title:"Table"},"|",{name:"blocMenu",action:e=>{l(e,"blocInformation","| ")},className:"fa fa-info",title:"Bloc information",children:[{name:"blocInformation",action:e=>{l(e,"blocInformation","| ")},className:"fa fa-info",title:"Bloc information"},{name:"blocQuestion",action:e=>{l(e,"blocQuestion","| ")},className:"fa fa-question",title:"Bloc question"},{name:"blocError",action:e=>{l(e,"blocError","| ")},className:"fas fa-times-circle",title:"Bloc erreur"},{name:"blocSecret",action:e=>{l(e,"blocSecret","| ")},className:"fa fa-eye-slash",title:"Bloc secret"},{name:"blocNeutral",action:e=>{l(e,"blocNeutral","| ")},className:"fa fa-sticky-note",title:"Bloc neutre"}]},"|",{name:"abc-spellchecker",action:e=>{},className:"fas fa-spell-check",title:"Correcteur orthographique externe"},{name:"abc-grammalecte",action:e=>{oGrammalecteAPI.openPanelForText(m.codemirror.getValue(),m.codemirror.display.lineDiv)},className:"zdsicon zi-grammalecte",title:"Correcteur orthographique externe"},{name:"switch-contentAreaStyle",action:t=>{m.isFullscreenActive()&&m.toggleFullScreen();const a=m.codemirror.getWrapperElement();e(a.parentElement).children(".textarea-multivers").toggle(),e(a).toggle();var i=e(m.element.parentElement).children(".editor-toolbar");i.hasClass("disabled-for-textarea-mode")?i.removeClass("disabled-for-textarea-mode"):i.addClass("disabled-for-textarea-mode"),m.codemirror.refresh()},className:"fas fa-remove-format",title:"Zone de texte sans mise en forme"},"|",{name:"preview",action:EasyMDE.togglePreview,className:"fa fa-eye no-disable disable-for-textarea-mode",title:"Aperçu"},{name:"side-by-side",action:EasyMDE.toggleSideBySide,className:"fa fa-columns no-disable no-mobile disable-for-textarea-mode",title:"Aperçu sur le coté"},{name:"fullscreen",action:EasyMDE.toggleFullScreen,className:"fa fa-arrows-alt no-disable no-mobile disable-for-textarea-mode",title:"Plein écran"}]});if(null!=c&&localStorage["smde_"+o]!==r.value){const t=e('<div class="alert-box info"></div>'),a=e("<a>Masquer l'alerte</a>");a.attr({href:"javascript:void(0)",class:"close-alert-box ico-after cross white",title:"Masquer l'alerte (raccourci clavier: Echap)"});const i=e('<a href="javascript:void(0)">cliquant ici</a>.').click((function(){window.editors[r.id].value(r.value),m.codemirror.off("keyHandled",n),localStorage.removeItem("smde_"+o),t.hide(()=>e(this).remove())}));i.attr({href:"javascript:void(0)",title:"Revenir à la version originale (non sauvegardée)"});const n=(a,i)=>("Ctrl-Z"!==i&&"Esc"!==i||(m.codemirror.off("keyHandled",n),t.hide(()=>e(this).remove())),!0);m.codemirror.on("keyHandled",n);const l=["La version actuelle du contenu provient d'une sauvegarde de votre navigateur. ","Vous pouvez revenir à la version originale (du serveur) avec CTRL+Z ou en ",i,"."];e("<span></span>").append(l).appendTo(t).after(a),e(m.element.parentElement).children(".editor-toolbar").before(t)}function u(e){""!==e.getValue()&&n.submit()}window.editors[this.id]=m,window.editors[this.id].timeout=0,window.editors[this.id].previous_value="",m.codemirror.addKeyMap({"Ctrl-Enter":u}),m.codemirror.addKeyMap({"Cmd-Enter":u}),m.codemirror.addKeyMap({"Ctrl-S":()=>{t.length&&window.saveFormNoRedirect(e(t[0].form),t)}}),m.codemirror.addKeyMap({"Cmd-S":()=>{t.length&&window.saveFormNoRedirect(e(t[0].form),t)}}),this.removeAttribute("required"),mirroringEasyMDE(m,r).css("minHeight",d+22+"px"),spellcheckerEasyMDE(m)}))}(jQuery);;
function uploadImage(e,t,a){var i=$(e.target),r=e.originalEvent[t]||window[t],n=[];if(r.files)n=r.files;else if(r.items)for(var l=0;l<r.items.length;l++)0===r.types[l].indexOf("Files")&&n.push(r.items[l].getAsFile());if(!n.length)return!1;var s="/api/galeries/"+document.body.getAttribute("data-gallery")+"/images/",o=function(e){var t=$("<div>",{text:e,class:"alert-box error"});t.append('<a href="#hidealert" class="close-alert-box close-alert-box-text">Cacher</a>');var a=document.documentElement.scrollTop,r=a+$(window).height(),n=t.offset().top,l=n+t.outerHeight(),s=function(e){$("body, html").animate({scrollTop:e},1e3)};return n<a?s(n):r<l&&s(l-$(window).height()),t.insertAfter(i)};return Object.values(n).forEach((function(e){var t=e.size/1024;if(0!==e.type.indexOf("image"))return o("Le format d'image est invalide !");if(t>1024)return o("Votre image est trop lourde ("+t+" Kio). La taille maximum est de 1024.0 Kio !");var r="!["+e.name+" en cours de téléchargement]()",n=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");i.val(i.val()+"\n"+r);var l=new FormData;l.append("physical",e),l.append("title",e.name),$.ajax({url:s,data:l,type:"POST",processData:!1,contentType:!1,headers:{"X-CSRFToken":a},dataType:"json"}).done((function(e){var t="!["+e.legend+"]("+e.url+")";i.val(i.val().replace(new RegExp(n),t)),i[0].dispatchEvent(new Event("update"))})).fail((function(e){var t="Erreur inconnue";void 0!==e.responseText&&-1!==e.responseText.indexOf("RequestDataTooBig")?t="L'image est trop lourde.":void 0!==e.responseJSON?t=e.responseJSON[0]:void 0!==e.responseText?t="Erreur "+e.status+" "+e.statusText+' : "'+e.responseText.split("\n")[0]+'"':0===e.readyState&&"error"===e.statusText&&(t="Oups ! Impossible de se connecter au serveur."),o(t),i.val(i.val().replace(new RegExp(n),""))}))})),!0}!function(e,t,a){"use strict";if("old"===localStorage.getItem("editor_choice")){var i,r={buttons:"bold,italic,strike,abbr,key,monospace#sup,sub#center,right#ul,ol#titles,blockcode,image,quote,link#infoblocks,chars,smilies",tags:{bold:{title:"Gras",start:"**",end:"**",useless:!0},italic:{title:"Italique",start:"*",end:"*",useless:!0},strike:{title:"Barré",start:"~~",end:"~~",useless:!0},sup:{title:"Exposant",start:"^",end:"^"},sub:{title:"Indice",start:"~",end:"~"},abbr:{title:"Abréviation"},key:{title:"Touche",start:"||",end:"||"},titles:{title:"Titres",action:"buildTitles"},ul:{title:"Liste à puces"},ol:{title:"Liste ordonnée"},center:{title:"Aligner au centre",start:"-> ",end:" <-"},right:{title:"Aligner à droite",start:"-> ",end:" ->",useless:!0},quote:{title:"Citation"},image:{title:"Image"},link:{title:"Lien"},table:{title:"Tableau"},infoblocks:{title:"Blocs spéciaux",action:"buildInfoblocks"},information:{title:"Bloc Information"},question:{title:"Bloc Question"},attention:{title:"Bloc Attention"},error:{title:"Bloc Erreur"},neutre:{title:"Bloc Neutre"},secret:{title:"Bloc masqué"},monospace:{title:"Code inline",start:"`",end:"`"},blockcode:{title:"Bloc de code coloré",action:"buildCode"},math:{title:"Formule mathématique",start:"$",end:"$"},hr:{title:"Ligne horizontalle",start:"\n\n------\n\n",end:"",useless:!0},chars:{title:"Caractères spéciaux",action:"buildChars"},smilies:{title:"Smileys",action:"buildSmilies",useless:!0},footnote:{title:"Note en bas de page"}},codes:{Web:{html:{title:"HTML"},css:{title:"CSS"},js:{title:"Javascript"},php:{title:"PHP"},jfx:{title:"JavaFX"},pl:{title:"Perl"},sql:{title:"SQL"},xml:{title:"XML"}},Prog:{arduino:{title:"Arduino"},c:{title:"C"},cpp:{title:"C++"},csharp:{title:"C#"},java:{title:"Java"},hs:{title:"Haskell"},py:{title:"Python"},ruby:{title:"Ruby"},vbnet:{title:"VB.NET"}},Autres:{bash:{title:"Bash"},diff:{title:"Diff"},scala:{title:"Scala"},groovy:{title:"Groovy"},ps:{title:"PowerShell"},text:{title:"Autre"}}},chars:{Typo:{char_g0:{title:"« »",start:"« ",end:" »"},char_gl:{title:"« ",start:"« ",end:""},char_gr:{title:" »",start:" »",end:""},char_h0:{title:"“ ”",start:"“",end:"”"},char_hl:{title:"“",start:"“",end:""},char_hr:{title:"”",start:"”",end:""},char_su:{title:"…",start:"…",end:""},char_ti:{title:"−",start:"−",end:""},char_ca:{title:"—",start:"—",end:""}},"Caractères":{char_in:{title:"Insécable",start:" ",end:""},char_ag:{title:"À",start:"À",end:""},char_cc:{title:"Ç",start:"Ç",end:""},char_ea:{title:"É",start:"É",end:""},char_eg:{title:"È",start:"È",end:""},char_oe:{title:"œ",start:"œ",end:""},char_eo:{title:"Œ",start:"Œ",end:""}}},smilies:{0:{smiley_sm:{title:":)",start:":)",end:"",image:"/static/smileys/smile.png"},smiley_he:{title:":D",start:":D",end:"",image:"/static/smileys/heureux.png"},smiley_cl:{title:";)",start:";)",end:"",image:"/static/smileys/clin.png"},smiley_la:{title:":p",start:":p",end:"",image:"/static/smileys/langue.png"},smiley_ri:{title:":lol:",start:":lol:",end:"",image:"/static/smileys/rire.gif"},smiley_un:{title:":euh:",start:":euh:",end:"",image:"/static/smileys/unsure.gif"},smiley_tr:{title:":(",start:":(",end:"",image:"/static/smileys/triste.png"},smiley_hu:{title:":o",start:":o",end:"",image:"/static/smileys/huh.png"},smiley_ib:{title:":B",start:":B",end:"",image:"/static/smileys/b.png"}},1:{smiley_c1:{title:":colere2:",start:":colere2:",end:"",image:"/static/smileys/mechant.png"},smiley_oo:{title:"o_O",start:"o_O",end:"",image:"/static/smileys/blink.gif"},smiley_uu:{title:"^^",start:"^^",end:"",image:"/static/smileys/hihi.png"},smiley_si:{title:":-°",start:":-°",end:"",image:"/static/smileys/siffle.png"},smiley_an:{title:":ange:",start:":ange:",end:"",image:"/static/smileys/ange.png"},smiley_c2:{title:":colere:",start:":colere:",end:"",image:"/static/smileys/angry.gif"},smiley_di:{title:":diable:",start:":diable:",end:"",image:"/static/smileys/diable.png"},smiley_ma:{title:":magicien:",start:":magicien:",end:"",image:"/static/smileys/magicien.png"}},2:{smiley_ni:{title:":ninja:",start:":ninja:",end:"",image:"/static/smileys/ninja.gif"},smiley_gd:{title:"X/",start:"X/",end:"",image:"/static/smileys/pinch.png"},smiley_pi:{title:":pirate:",start:":pirate:",end:"",image:"/static/smileys/pirate.png"},smiley_pl:{title:":'(",start:":'(",end:"",image:"/static/smileys/pleure.png"},smiley_ro:{title:":honte:",start:":honte:",end:"",image:"/static/smileys/rouge.png"},smiley_so:{title:":soleil:",start:":soleil:",end:"",image:"/static/smileys/soleil.png"},smiley_ww:{title:":waw:",start:":waw:",end:"",image:"/static/smileys/waw.png"},smiley_zz:{title:":zorro:",start:":zorro:",end:"",image:"/static/smileys/zorro.png"}}},titles:{link:"Lien hypertexte",abbr:"Abréviation",image:"Image"},isExecuted:!1,selection:null,currentElemPopup:null,addEvent:function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a)},init:function(){for(var a in this.smilies)for(var i in this.smilies[a]){var r=this.smilies[a][i];r.start=" "+r.start+" "}for(var n,l=this,s=t.getElementsByTagName("textarea"),o=0,c=s.length;o<c;o++)/md.editor/.test(s[o].className)&&this.setup(s[o].id);this.addEvent(t.getElementById("content"),"DOMNodeInserted",(n=this,function(e){/md.editor/.test(e.target.className)&&n.setup(e.target.id)}));var d=t.createElement("a");function m(e){var t=d.cloneNode(!0);return t.addEventListener("click",l.validatePopup.bind(l,e)),t}d.className="btn btn-submit",d.innerHTML="Valider",d.href="javascript:;",this.modals={},this.modals.link=new e.Modal({title:this.titles.link,body:"<div><label for=zform-modal-link-href>Lien :</label><input type=text id=zform-modal-link-href /></div><div><label for=zform-modal-link-text>Texte :</label><input type=text id=zform-modal-link-text /></div>",footer:m("link")}),this.modals.image=new e.Modal({title:this.titles.image,body:"<div><label for=zform-modal-image-src>URL :</label><input type=text id=zform-modal-image-src /></div><div><label for=zform-modal-image-text>Texte :</label><input type=text id=zform-modal-image-text /></div>",footer:m("image")}),this.modals.abbr=new e.Modal({title:this.titles.abbr,body:"<div><label for=zform-modal-abbr-abbr>Abréviation :</label><input type=text id=zform-modal-abbr-abbr /></div><div><label for=zform-modal-abbr-text>Texte :</label><input type=text id=zform-modal-abbr-text /></div>",footer:m("abbr")})},setup:function(e){var a=t.getElementById(e),i=t.createElement("ul"),r=this;i.className="zform-toolbar hide-for-small",a.parentNode.insertBefore(i,a),this.isExecuted||(this.addEvent(t,"click",(function(e){if(~e.target.className.indexOf("zform-button")&&!~e.target.className.indexOf("zform-subbutton"))return e.stopPropagation();for(var a=t.getElementsByClassName("zform-popup"),i=0;a[i];)"dontclose"===a[i].getAttribute("data-zform-info")&&"textarea"!==e.target.nodeName.toLowerCase()||(a[i].style.display="none",r.currentElemPopup=a[i]==r.currentElemPopup?null:r.currentElemPopup),i++}),!1),this.isExecuted=!0);for(var n,l,s,o=this.buttons.split("#"),c=0,d=o.length;c<d;c++){for(var m=0,u=(n=o[c].split(",")).length;m<u;m++)(s=this.tags[n[m]])?l=i.appendChild(t.createElement("li")).appendChild(this.createButton(s,{display:"button",type:n[m],textarea:e})):alert("La valeur '"+n[m]+"' n'est pas reconnue comme étant une valeur correcte pour un bouton de zForm ! Corrigez votre syntaxe.");l.style.marginRight="20px"}},createButton:function(e,a){var i,r,n,l,s,o,c=t.createElement("button"===a.display?"a":"span");if(c.className="button"===a.display?"ico-after zform-button zform-button-"+a.type:"zform-subbutton-span-"+a.type,e.useless&&(c.className+=" zform-button-useless"),c.setAttribute("data-zform-textarea",a.textarea),c.title=e.title,c.innerHTML=e.title,"span"===a.display&&(c.style.display="block"),e.hasOwnProperty("image")&&(c.innerHTML='<img src="'+e.image+'" alt="'+e.title+'" />'),e.action){var d=this;c.style.position="relative",this.currentElemPopup&&(c.removeChild(this.currentElemPopup),this.currentElemPopup=null),this.addEvent(c,"click",(function(e,a){if(e.preventDefault(),a=this.getElementsByTagName("div")[0]){a.style.display="block";var i=t.getElementById("content").offsetWidth,r=a.offsetParent.offsetLeft+a.offsetWidth<=i;a.style.left=r?"0":"inherit",a.style.right=r?"inherit":"0";var n=a.offsetParent.offsetLeft,l=n-a.offsetWidth;if(!r&&l<0){a.style.right="inherit";var s=-n;s+=Math.max((i-a.offsetWidth)/2,0),a.style.left=s+"px"}d.currentElemPopup&&(d.currentElemPopup.style.display="none"),d.currentElemPopup==a?d.currentElemPopup=null:d.currentElemPopup=a}})),(i=c.appendChild(t.createElement("div"))).className="zform-popup",i.style.position="absolute",i.style.display="none",i.style.left="0",i.style.width="auto",i.style.whiteSpace="nowrap",i.style.textAlign="left",i=this[e.action](i,e,a.textarea)}else this.addEvent(c,"click",(r=e,n=a.textarea,l=this,s=a.type,o=a.extra,function(e){l.wrap(r.start,r.end,n,s,o),this.style.fontWeight="bold"}),!1);return c},openPopup:function(e){return this.modals[e].open(),!1},closePopup:function(){e.Modal.closeCurrent()},validatePopup:function(e){e=e||this.selection.type,this.selection&&this.selection.type&&this.wrap("___","+++",this.selection.textareaId,e,null,!0),this.closePopup()},buildTitles:function(e,a,i,r){for(var n=1;n<=4;n++)(r=e.appendChild(t.createElement("a"))).className="ico-after zform-button zform-subbutton zform-button-title"+n,r.title="Titre de niveau "+n,r.innerText="Titre de niveau "+n,this.addEvent(r,"mousedown",function(e,t,a){return function(i){i.preventDefault(),e.wrap("","",t,a)}}(this,i,"title"+n),!1);return e},buildInfoblocks:function(e,a,i,r){for(var n=["information","question","attention","error","neutre","secret"],l=0;l<6;l++)(r=e.appendChild(t.createElement("a"))).className="ico-after zform-button zform-subbutton zform-button-"+n[l],r.title=this.tags[n[l]].title,r.innerText=this.tags[n[l]].title,this.addEvent(r,"mousedown",function(e,t,a){return function(i){i.preventDefault(),e.wrap("","",t,a)}}(this,i,n[l]),!1);return e},buildColumnous:function(e,a,i){var r,n,l;for(var s in i.src)for(l in(r=e.appendChild(t.createElement("div"))).className="zform-code-col",isNaN(s)&&((n=r.appendChild(t.createElement("b"))).style.display="block",n.style.fontWeight="bold",n.innerHTML=s),i.src[s])i.extra=l,r.appendChild(this.createButton(i.src[s][l],i));return e},buildCode:function(e,t,a){return this.buildColumnous(e,t,{textarea:a,src:this.codes,type:"blockcode",display:"span"})},buildChars:function(e,t,a){return this.buildColumnous(e,t,{textarea:a,src:this.chars,type:"chars",display:"span"})},buildSmilies:function(e,t,a){return this.buildColumnous(e,t,{textarea:a,src:this.smilies,type:"smiley",display:"span"})},wrap:function(e,a,i,r,n,l){var s=t.getElementById(i),o=s.scrollTop,c=l?this.selection:{before:null,current:null,after:null,range:null,startTag:e,endTag:a,textareaId:i,type:r,options:n};s.focus(),s.setSelectionRange?(l||(c.before=s.value.substring(0,s.selectionStart),c.current=s.value.substring(s.selectionStart,s.selectionEnd),c.after=s.value.substring(s.selectionEnd)),s.blur(),(c=this.tagType(c,c.type,c.options,l))&&(s.value=c.before+c.startTag+c.current+c.endTag+c.after,s.focus(),s.setSelectionRange(c.before.length+c.startTag.length,c.before.length+c.startTag.length+c.current.length))):(l||(c.range=t.selection.createRange(),c.current=c.range.text),(c=this.tagType(c,c.type,c.options,l))&&(c.range.text=c.startTag+c.current+c.endTag,c.range.moveStart("character",-c.endTag.length-c.current.length),c.range.moveEnd("character",-c.endTag.length),c.range.select())),s.scrollTop=o,s.dispatchEvent(new Event("update"))},tagType:function(e,a,i,r){if(!a)return e;this.selection=e;var n,l,s,o="";function c(e,t){for(var a=e.split("\n"),i=0===t,r=0,n=a.length;r<n;r++)a[r]=(i?++t+".":t)+" "+a[r];return a.join("\n")}switch(a){case"link":if(!r)return s=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"),this.openPopup(a),s.test(e.current)?(t.getElementById("zform-modal-link-href").value=e.current,t.getElementById("zform-modal-link-text").value="",t.getElementById("zform-modal-link-text").focus()):(t.getElementById("zform-modal-link-text").value=e.current,t.getElementById("zform-modal-link-href").value="",t.getElementById("zform-modal-link-href").focus()),!1;n=t.getElementById("zform-modal-link-href").value,l=t.getElementById("zform-modal-link-text").value,e.current="["+l+"]("+n+")";break;case"image":if(!r)return s=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"),this.openPopup(a),s.test(e.current)?(t.getElementById("zform-modal-image-src").value=e.current,t.getElementById("zform-modal-image-text").value="",t.getElementById("zform-modal-image-text").focus()):(t.getElementById("zform-modal-image-text").value=e.current,t.getElementById("zform-modal-image-src").value="",t.getElementById("zform-modal-image-src").focus()),!1;var d=t.getElementById("zform-modal-image-src").value;l=t.getElementById("zform-modal-image-text").value||"Image utilisateur",e.current="!["+l+"]("+d+")";break;case"quote":e.current=c(e.current,">");break;case"information":case"attention":case"question":case"secret":e.current="[["+a+"]]\n"+c(e.current,"|");break;case"error":e.current="[[erreur]]\n"+c(e.current,"|");break;case"neutre":e.current="[["+a+"|Titre]]\n"+c(e.current,"|");break;case"ul":e.current=c(e.current,"-");break;case"ol":e.current=c(e.current,0);break;case"title1":case"title2":case"title3":case"title4":for(var m=0,u=parseInt(a.charAt(5));m<u;m++)o+="#";e.current=e.current.replace(/^\s*?/,o+" ");break;case"footnote":if(!e.current)return;(o=prompt("Entrez la signification de cette abréviation"))&&(e.after+="\n\n*["+e.current+"]: "+o);break;case"abbr":if(this.openPopup(a),r){var p=t.getElementById("zform-modal-abbr-text").value;""===p.trim()&&(p=t.getElementById("zform-modal-abbr-abbr").value),e.after+="\n\n*["+t.getElementById("zform-modal-abbr-abbr").value+"]: "+p}else e.current.length<10?(t.getElementById("zform-modal-abbr-abbr").value=e.current,t.getElementById("zform-modal-abbr-text").value="",t.getElementById("zform-modal-abbr-text").focus()):(t.getElementById("zform-modal-abbr-text").value=e.current,t.getElementById("zform-modal-abbr-abbr").value="",t.getElementById("zform-modal-abbr-abbr").focus());break;case"blockcode":e.startTag="```"+e.options+(0===e.current.indexOf("\n")?"":"\n"),e.endTag="\n```"}return e.startTag||(e.startTag=""),e.endTag||(e.endTag=""),e}};r.addEvent(t,"DOMContentLoaded",(i=r,function(){i.init()}))}}(window,document),function(e,t){"use strict";if("old"===localStorage.getItem("editor_choice")){var a=e("input[name=csrfmiddlewaretoken]").val(),i=0;e(".md-editor").on("keydown",(function(t){!t.ctrlKey&&!t.metaKey||13!==t.which||t.altKey||t.shiftKey||(t.preventDefault(),e(".message-submit > button[name=answer]").click())})).on("dragenter",(function(t){i++,t.preventDefault(),1===i&&e(t.target).addClass("selected")})).on("dragover",(function(e){e.preventDefault()})).on("dragleave",(function(t){i--,t.preventDefault(),0===i&&e(t.target).removeClass("selected")})).on("drop",(function(t){t.preventDefault(),uploadImage(t,"dataTransfer",a),e(t.target).removeClass("selected"),i=0})).on("paste",(function(e){var t=e.originalEvent.clipboardData;(t.files||t.items).length&&uploadImage(e,"clipboardData",a)&&e.preventDefault()}))}}(jQuery),function(e){"use strict";var t;"old"===localStorage.getItem("editor_choice")&&(t=e.querySelectorAll(".md-editor"),Array.prototype.slice.call(t)).forEach((function(e){e.getAttribute("name");var t=(window.location.pathname+window.location.search+"@"+e.getAttribute("name")).replace(/[?|&]page=(\d+)/g,""),a=e.closest("form"),i=localStorage.getItem("smde_"+t);function r(){""===e.value?localStorage.removeItem("smde_"+t):localStorage.setItem("smde_"+t,e.value)}i&&!e.value&&(e.value=i),e.addEventListener("input",r),e.addEventListener("update",r),a.addEventListener("submit",(function(){localStorage.removeItem("smde_"+t)}))}))}(document),"old"===localStorage.getItem("editor_choice")&&$(".message-bottom [data-ajax-input='preview-message'], .preview-btn").on("click",(function(e){e.stopPropagation(),e.preventDefault();var t=$(this),a=t.parents("form:first"),i="";if(a.find(".preview-source").length){var r=t.parent().prev().find(".preview-source");i=r.val()}else i=a.find("textarea[name=text]").val();var n=a.find("input[name=csrfmiddlewaretoken]").val(),l=a.find("input[name=last_post]").val();$.ajax({url:a.attr("action"),type:"POST",data:{csrfmiddlewaretoken:n,text:i,last_post:l,preview:"preview"},success:function(e){$(".previsualisation").remove(),void 0===r?$(e).insertAfter(a):$(e).insertAfter(t)}})}));;
!function(t){t(".featured-request").on("click",".unpick-action",(function(){var e=t(this),r=e.parent().parent(),a=r.parent(),n=t("input[name='csrfmiddlewaretoken']").val(),o=e.data("operation"),i={csrfmiddlewaretoken:n};o&&(i.operation=e.data("operation")),t.post(e.attr("data-url"),i).done((function(t){"OK"===t.result?"REJECT"===o||"REJECT_FOR_GOOD"===o?(r.remove(),0===a.find("tr").length&&a.append('<tr><td colspan="4"><i>Plus rien à afficher pour le moment !</i></td></tr>')):(e.toggleClass("cross hide"),e.text("Ignorer"),e.data("operation","REJECT")):e.prop("disabled",!0)}))}))}(jQuery);;
!function(e){e(".featured-resource-edit-form form input").on("change input",(function(){var r,t,i,u,a,n;r={image:e(".featured-resource-edit-form input[name=image_url]").val(),title:e(".featured-resource-edit-form input[name=title]").val(),description:(u=e(".featured-resource-edit-form input[name=authors]").val(),a=e(".featured-resource-edit-form input[name=type]").val(),n=a,u.length>0&&(n+=" par "+u),n),link:e(".featured-edit-form input[name=url]").val()},t=e(".featured-resource-edit-form .featured-resource-item"),i=e(t),r.image?i.find(".featured-resource-illu").show().attr("src",r.image):i.find(".featured-resource-illu").hide(),i.find("h2").text(r.title),i.find(".featured-resource-description").html(r.description),i.find("a").attr("href",r.link)}))}(jQuery);;
!function(e){"use strict";if(e("body").hasClass("form-email-username")){var a=e("#id_email"),d=e("#form-email"),s=e("[data-form-email-username-button=email]"),n=e("#id_username"),l=e("#form-username"),i=e("[data-form-email-username-button=username]");""===a.val()?d.addClass("hidden"):d.removeClass("hidden"),s.on("click",(function(e){d.toggleClass("hidden"),l.addClass("hidden"),n.val(""),e.preventDefault()})),""===n.val()?l.addClass("hidden"):l.removeClass("hidden"),i.on("click",(function(e){l.toggleClass("hidden"),d.addClass("hidden"),a.val(""),e.preventDefault()}))}}(jQuery);;
!function(e){"use strict";var s=e(".toggle-gallery-view"),l=e(".gallery"),i=function(){s.text(l.hasClass("list-view")?"Vue grille":"Vue liste")};s.length>0&&(s.on("click",(function(){l.hasClass("list-view")?l.removeClass("list-view").addClass("grid-view"):l.removeClass("grid-view").addClass("list-view"),i()})),i());var t=function(){this.checked?e(this).parents(".gallery-item").addClass("selected"):e(this).parents(".gallery-item").removeClass("selected")};l.length>0&&e(".gallery-item input[type=checkbox]").on("change",t).each(t)}(jQuery);;
document.documentElement.classList.add("js");;
!function(e){"use strict";function t(t){var a,n,r,i=t.nodeName.toLowerCase(),u=!isNaN(e.attr(t,"tabindex"));return"area"===i?(n=(a=t.parentNode).name,!(!t.href||!n||"map"!==a.nodeName.toLowerCase())&&(!!(r=e("img[usemap='#"+n+"']")[0])&&o(r))):(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"===i&&t.href||u)&&o(t);function o(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}}e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(a){return!!e.data(a,t)}})):function(t,a,n){return!!e.data(t,n[3])},focusable:function(a){return t(a,isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var n=e.attr(a,"tabindex"),r=isNaN(n);return(r||n>=0)&&t(a)}})}(jQuery);;
!function(t){"use strict";var e=function(t){if(this.message=t,!this.message.is(".topic-message"))throw new Error("Target is not a .topic-message");this.init(),this.message.data("karma",this)};e.prototype={updateInterval:3e4,init:function(){this.karmaElem=this.message.find(".message-karma"),this.karmaURI=this.karmaElem.data("karma-uri"),this.csrf=t("input[name=csrfmiddlewaretoken]").val(),this.like={},this.dislike={},this.like.button=this.karmaElem.find(".upvote"),this.dislike.button=this.karmaElem.find(".downvote"),this.like.tooltip=this.like.button.tooltip(this.like.button.hasClass("has-vote")?"Chargement...":""),this.dislike.tooltip=this.dislike.button.tooltip(this.dislike.button.hasClass("has-vote")?"Chargement...":""),t(this.like.tooltip.elem).add(this.dislike.tooltip.elem).on("click",this.showDetails.bind(this)),this.like.listElem=t("<ul>",{class:"vote-list like"}),this.dislike.listElem=t("<ul>",{class:"vote-list dislike"}),this.canVote=this.karmaElem.hasClass("can-vote"),this.updateInterval=3e4,this.canVote&&(this.like.button.on("click",this.vote.bind(this,"like")),this.dislike.button.on("click",this.vote.bind(this,"dislike"))),this.like.button.on("mouseover",this.regularUpdate.bind(this)),this.dislike.button.on("mouseover",this.regularUpdate.bind(this)),this.like.button.hasClass("voted")?this.currentVote="like":this.dislike.button.hasClass("voted")?this.currentVote="dislike":this.currentVote="neutral"},vote:function(e,s){e===this.currentVote&&(e="neutral"),t.ajax({method:"PUT",url:this.karmaURI,data:{vote:e},headers:{"X-CSRFToken":this.csrf}}).done(this.update.bind(this)),s&&(s.preventDefault(),s.stopPropagation())},fetchUpdate:function(){var e=this;this.updating||(this.updating=!0,t.getJSON(this.karmaURI).done(this.update.bind(this)).always((function(){e.updating=!1})))},regularUpdate:function(){(!this.lastUpdate||this.lastUpdate+this.updateInterval<Date.now())&&(this.fetchUpdate(),this.lastUpdate=Date.now())},update:function(t){this.updateOne(t,"like","dislike"),this.updateOne(t,"dislike","like"),this.currentVote=t.user},updateOne:function(e,s,i){e[s].count>0?this[s].button.addClass("has-vote"):this[s].button.removeClass("has-vote"),e[s].count>e[i].count?this[s].button.addClass("more-voted"):this[s].button.removeClass("more-voted"),e.user===s?this[s].button.addClass("voted"):this[s].button.removeClass("voted");var a,n=e[s].count+" personne";if(1===e[s].count&&"like"===s?n+=" a":1===e[s].count&&"dislike"===s?n+=" n'a pas":n+="like"===s?"s ont":"s n'ont pas",n+=" trouvé ce message utile",this.canVote?(a="Ce message "+("like"===s?"est":"n'est pas")+" utile",0!==e[s].count&&(a+=" ("+n+")")):a=n,this[s].button.attr("title",a),this[s].button.text(("like"===s?"+":"-")+e[s].count),Object.hasOwnProperty.call(e[s],"users")){var o=e[s].users.slice(0,9),l=e[s].count-o.length,h=t("#my-account .username").text(),r=o.map((function(t){return t.username===h?"Vous ("+t.username+")":t.username}));if(l>0){var u=r.length>0?"et "+l+" autre":l+" vote";1!==l&&(u+="s"),r.push(u)}if(this[s].tooltip.setContent(r.map((function(e){return t("<div>",{text:e})}))),this[s].listElem.empty(),0===e[s].count)t("<li>",{class:"muted",text:"Pas de votes "+("like"===s?"positifs":"négatifs")}).appendTo(this[s].listElem);else{this[s].listElem.append(e[s].users.map((function(e){return t("<li>").append(t("<a>",{href:e.html_url,text:e.username}).prepend(t("<img />",{src:e.avatar_url})))})));var d=e[s].count-e[s].users.length;d&&t("<li>",{text:d+" anonyme"+(1===d?"":"s"),class:"muted"}).appendTo(this[s].listElem)}}},showDetails:function(){if(!this.detailsModal){var e=t("<div>",{class:"vote-details"}).append(t("<div>",{class:"vote-col"}).append(t("<h3>",{text:"Votes positifs"})).append(this.like.listElem)).append(t("<div>",{class:"vote-col"}).append(t("<h3>",{text:"Votes négatifs"})).append(this.dislike.listElem));this.detailsModal=new window.Modal({title:"Détail des votants",titleIcon:"hide light",body:e,closeText:"Fermer"})}this.detailsModal.open()}},t.fn.karma=function(){if(1!==this.length)return t(this).map((function(e,s){t(s).karma()}));var s,i=(s=t(this).is(".topic-message")?t(this):t(this).parents(".topic-message")).data("karma");return i||new e(s)},t(document).ready((function(){t(".topic-message").has(".message-karma").karma()}))}(jQuery);;
!function(e){"use strict";e(document).ready((function(){var n=e("#content .navigable-list");if(n.length>0){var i=n.find(".navigable-elem");e("body").on("keydown",(function(t){if(!e(document.activeElement).is(":input")&&(74===t.which||75===t.which)){var l=n.find(".navigable-elem.active"),s=null;if(1===l.length){var v=i.index(l);75===t.which?v>0&&(s=v-1):v+1<i.length&&(s=v+1)}else s=0;null!==s&&(l.removeClass("active"),a(i.eq(s)))}})),e("#content .navigable-list").on("focus",".navigable-link",(function(){e(this).parents(".navigable-elem:first").hasClass("active")||(n.find(".navigable-elem.active").removeClass("active"),a(e(this).parents(".navigable-elem")))})).on("blur",".navigable-link",(function(){e(this).parents(".navigable-elem:first").removeClass("active")}))}function a(e){e.addClass("active").find(".navigable-link").focus()}e("#content").on("DOMNodeInserted",".navigable-list, .navigable-elem",(function(){n=e("#content .navigable-list")}))}))}(jQuery);;
!function(e){"use strict";var o=["les simples retours à la ligne ne sont pas pris en compte. Pour créer un nouveau paragraphe, pensez à <em>sauter une ligne</em> !","encadrez votre texte par une astérisque pour écrire en italique ou deux pour du gras.","pour écrire un lien, utilisez la syntaxe <code>[texte de lien](url du lien)</code>","les blocs de code sont délimités par trois accents graves <code>```</code>.","pour créer une liste à puces, sautez une ligne et commencez chaque élément de la liste par <code>+</code>, <code>-</code> ou <code>*</code>.","pour citer quelqu'un, utilisez le symbole <code>></code>.","pour tracer une ligne, utilisez <code>---</code>, <code>+++</code> ou <code>***</code>.","pour aller à la ligne sans changer de paragraphe, finissez votre première ligne par deux espaces.","pour écrire un bout de code au milieu d’une phrase, utilisez la syntaxe <code>`un bout de code`</code>.",'le langage d’un bloc de code peut être spécifié après les <code>```</code> ouvrants. <a href="https://github.com/highlightjs/highlight.js/blob/master/SUPPORTED_LANGUAGES.md">La liste des langages supportés est disponible ici.</a>','vous pouvez <a href="//zestedesavoir.com/tutoriels/244/comment-rediger-des-maths-sur-zeste-de-savoir/">écrire des formules mathématiques</a> en encadrant ces dernières du signe dollar <code>$</code>.',"pour ajouter une image, vous pouvez simplement la glisser-déposer depuis votre explorateur.","vous pouvez préciser à quel numéro commencent les lignes avec cette syntaxe : <code>```python linenostart=42</code> au début d'un bloc de code. Pratique pour faire coïncider les numéros de ligne à une erreur, par exemple.","vous pouvez surligner des lignes avec cette syntaxe : <code>```rust hl_lines=2,4-7</code> au début d'un bloc de code.","vous pouvez à la fois choisir à quel numéro démarrent les lignes et en surligner avec <code>```lisp linenostart=244 hl_lines=247,252</code> au début d'un bloc de code."];function r(r){r.each((function(){var r=e("<div/>",{class:"markdown-help",html:"<strong>Astuce :</strong> "+o[Math.floor(Math.random()*o.length)]+" <a href=\"//zestedesavoir.com/tutoriels/221/rediger-sur-zds/\">Envie d'en savoir plus ?</a><a href='#close-alert-box' class='close-alert-box ico-after cross'>Masquer</a>"});e(this).after(r)}))}e(document).ready((function(){e("body").data("show-markdown-help")&&("new"===localStorage.getItem("editor_choice")?r(e(".editor-statusbar")):r(e(".md-editor")),e("#content").on("DOMNodeInserted",".md-editor",(function(o){var s=e(o.target);!1===s.next().hasClass("markdown-help")&&r(s)})))}))}(jQuery);;
!function(e){"use strict";function n(){let n=e(this).next();do{n.toggleClass("hidden"),n=n.next()}while(n[0]&&n.hasClass("hidden-by-someone"))}e("div.msg-are-hidden.hidden").each((function(){const t=e(this);t.removeClass("hidden"),n.apply(this),t.children("a").click((function(){return n.apply(this.parentNode),!1}))})),e("#content [href^='#show-message-hidden']").on("click",(function(n){e(this).parents(".message:first").find(".message-hidden-content").toggle(),n.preventDefault()}))}(jQuery);;
!function(t){"use strict";t(".message-bottom .signature").on("click",(function(){t(this).toggleClass("full")}))}(jQuery);;
!function(e){"use strict";var t=navigator.userAgent,n=t.indexOf("Android")>-1&&t.indexOf("Mozilla/5.0")>-1&&t.indexOf("AppleWebKit")>-1,i=new RegExp(/AppleWebKit\/([\d.]+)/),o=null===i.exec(t)?null:parseFloat(i.exec(t)[1]),a=n&&null!==o&&o<537;a&&e("html").removeClass("enable-mobile-menu");for(var s="",l=["transform","msTransform","MozTransform","WebkitTransform","OTransform"],m=["","-ms-","-moz-","-webkit-","-o-"],r=document.createElement("div"),d=0;d<l.length;++d)if(void 0!==r.style[l[d]]){s=m[d];break}function c(t,n){if(t.hasClass("mobile-menu-imported"))return!1;if(n)return t.addClass("mobile-menu-imported"),t=t.clone().removeAttr("id").appendTo("#mobile-menu");var i=e("<div/>");i.addClass("mobile-menu-bloc"),i.attr("data-title",t.attr("data-title")),t.hasClass("mobile-show-ico")&&i.addClass("mobile-show-ico");var o=t.hasClass("mobile-all-links"),a=t.find(o?"a, button, span.disabled":".mobile-menu-link");return o&&(a=a.not(".action-hover")),a.each((function(){if(0===e(this).parents(".mobile-menu-imported, .modal").length){var t,n=e(this).clone().addClass("light");if(e(this).is("button")){var o=e(this).parents("form:first");o.attr("id")?t=o.attr("id"):(t="form"+e(".identified-form").length,o.attr("id",t).addClass("identified-form")),n.attr("form",t)}i.append(n)}})),o&&i.find("a, button, span.disabled").addClass("mobile-menu-link"),t.addClass("mobile-menu-imported"),i.appendTo(e("#mobile-menu")),i}function u(t){var n;null===t&&(t=!e("html").hasClass("show-mobile-menu")),e("body").removeClass("swipping");var i=document.querySelector('meta[name="viewport"]');t?e("html").hasClass("show-mobile-menu")||(n=e(document).scrollTop(),e(".page-container").css({"margin-top":"-"+n+"px","padding-bottom":n+"px"}),e("html").addClass("show-mobile-menu"),i.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0"):(e("html").removeClass("show-mobile-menu"),n=parseInt(e(".page-container").css("padding-bottom")),e(".page-container").css({"margin-top":"","padding-bottom":""}),n>0&&e(document).scrollTop(n),e("body").removeClass("swipping"),setTimeout((function(){e("#mobile-menu").scrollTop(0),i.content="width=device-width, minimum-scale=1.0, initial-scale=1.0",e("html").css({position:"absolute",left:"0"}),setTimeout((function(){e("html").removeAttr("style")}),500)}),200))}s+="transform",e(window).on("resize",(function(){if(parseInt(e("html").css("width"))<960&&!a){if(e(".page-container").css("width",e("html").css("width")),!e("#mobile-menu").hasClass("initialized"))e("#mobile-menu").addClass("initialized"),e(".mobile-menu-btn").on("click",(function(t){e("html").hasClass("show-mobile-menu")||(u(!0),t.preventDefault(),t.stopPropagation())})),c(e("#search"),!0),c(e("#my-account"),!0).addClass("mobile-menu-link mobile-menu-bloc"),c(e(".header-menu")),e(".page-container .mobile-menu-bloc .mobile-menu-bloc").each((function(){c(e(this))})),e(".page-container .mobile-menu-bloc:not(.my-account-dropdown)").each((function(){c(e(this))})),c(e(".my-account-dropdown"));if(!e("#mobile-menu").hasClass("initialized-events")){var t=0,n=!1;e("body").on("touchstart",(function(n){t=parseInt(n.originalEvent.touches[0].pageX,10)-e(".page-container").offset().left})),e(".page-container").on("touchmove",(function(i){if(n||parseInt(i.originalEvent.touches[0].pageX,10)-e(this).offset().left<50){i.preventDefault(),e("body:not(.swipping)").addClass("swipping"),n=!0;var o=parseInt(i.originalEvent.touches[0].pageX,10)-t;if((o=100*o/parseInt(e("html").width()))>0&&o<90){var a={};a[s]="translate3d("+o+"%, 0, 0)",e(this).css(a),o=20*o/90-20,a[s]="translate3d("+o+"%, 0, 0)",e("#mobile-menu").css(a)}}})).on("touchend touchleave touchcancel",(function(){if(n){var t=parseInt(e(this).offset().left),i=parseInt(e("html").width());u(t>i/3&&!e("html").hasClass("show-mobile-menu")||t>i-i/3&&e("html").hasClass("show-mobile-menu")),n=!1,e("body").removeClass("swipping");var o={};o[s]="",e(".page-container, #mobile-menu").css(o)}})),e(".page-container").on("click",(function(t){e("html").hasClass("show-mobile-menu")&&(u(!1),t.preventDefault(),t.stopPropagation())})),e("#mobile-menu").addClass("initialized-events")}}else e("html").removeClass("show-mobile-menu"),e("#mobile-menu").removeClass("initialized-events"),e(".page-container").removeAttr("style"),e(".page-container").off("click touchstart touchmove touchend")})),e(window).trigger("resize"),e(window).on("resize",(function(){if(parseInt(e("html").css("width"))<960&&!a){var t=e(".sidebar .new-btn:not(.mobile-btn-imported)");if(t.length>0){var n=e("#content").find("> .content-wrapper, > .full-content-wrapper, > .content-col-2").first().find("h1, h2").first();n.next(".license").length>0&&(n=n.next(".license")),n.next(".subtitle").length>0&&(n=n.next(".subtitle")),n.next(".taglist").length>0&&(n=n.next(".taglist"));var i=e("<div/>",{class:"new-btn-container"});t.each((function(){i.append(e(this).clone().removeAttr("id").removeClass("blue")),e(this).addClass("mobile-btn-imported")})),n.after(i)}}})),e(window).trigger("resize")}(jQuery);;
!function(t){"use strict";t("body").on("change",".select-autosubmit",(function(){t(this).parents("form:first").submit()}))}(jQuery);;
!function(t){"use strict";const n=jQuery("#share-to-mastodon"),i=n.find("button");n.find("input[name='instance']").on("change paste keyup",(function(){this.value.startsWith("https://")?i.prop("disabled",!1):i.prop("disabled",!0)})),n.on("submit",(function(){n.attr("action",n.find("input[name='instance']").val()+"/share")}))}();;
!function(){function t(t){this._parent=t,this._canvas=document.createElement("canvas");var i=this._canvas;this.resize(),i.style.zIndex=-1,i.style.position="absolute",i.style.left=0,i.style.background=window.getComputedStyle(this._parent).getPropertyValue("background-color"),this._parent.style.background="transparent",this._parent.children.length>0?this._parent.insertBefore(i,this._parent.children[0]):this._parent.appendChild(i),this._ctx=i.getContext("2d"),this.setup()}t.prototype={PARTICLES_COLOR:"rgba(255, 255, 255, 0.8)",MAX_PARTICLES:25,SPAWN_RATE:100,PARTICLES_SPEED:15,PARTICLES_SIZE:2,TURBULENCES_X:1,TURBULENCES_Y:.5,TURBULENCES_SPEED:1,MAX_TIMESHIFT:Math.PI/3,setup:function(){this.particles=[],this._lastSpawn=this._lastLoop=Date.now(),this.loop(),window.addEventListener("resize",this.resize.bind(this))},resize:function(){var t=this._parent.getBoundingClientRect();this.H=t.height,this.W=t.width,this._canvas.height=this.H,this._canvas.width=this.W},spawnParticle:function(){this.particles.push({x:Math.random()*this.W,y:-this.PARTICLES_SIZE,d:Math.random()+1,s:Math.random()*this.MAX_TIMESHIFT})},loop:function(){this.update(),this.draw(),requestAnimationFrame(this.loop.bind(this))},update:function(){var t,i=Date.now(),s=i-this._lastLoop;for(var e in this.particles)(t=this.particles[e]).y+=s/1e3*(this.PARTICLES_SPEED*t.d*(1.5+Math.sin(i*this.TURBULENCES_SPEED/1e3+t.s)*this.TURBULENCES_Y)),t.x+=s/1e3*(this.PARTICLES_SPEED*t.d*(Math.cos(i*this.TURBULENCES_SPEED/1e3+t.s)*this.TURBULENCES_X)),(t.y-4*t.d>this.H||t.x-4*t.d>this.W||t.x+4*t.d<0)&&this.particles.splice(e,1);this._lastSpawn<=i-this.SPAWN_RATE&&this.particles.length<this.MAX_PARTICLES&&(this._lastSpawn=i,this.spawnParticle()),this._lastLoop=i},draw:function(){var t;for(var i in this._ctx.clearRect(0,0,this.W,this.H),this._ctx.fillStyle=this.PARTICLES_COLOR,this._ctx.beginPath(),this.particles)t=this.particles[i],this._ctx.moveTo(t.x,t.y),this._ctx.arc(t.x,t.y,t.d*this.PARTICLES_SIZE,0,2*Math.PI,!0);this._ctx.fill()}},window.addEventListener("DOMContentLoaded",(function(){-1!==document.body.className.split(" ").indexOf("vc-snow")&&setTimeout((function(){window.snow=new t(document.querySelector(".header-container > header"))}),1e3)}))}();;
!function(e){"use strict";function t(t){t.each((function(){var t=e(this);if(!t.hasClass("spoiler-build")){var o="Afficher/Masquer le contenu masqué",i=t.find(".custom-block-heading");i[0]&&(o=i.text()+" (Afficher/Masquer)",i.remove()),t.before(e("<a/>",{text:o,class:"spoiler-title ico-after view",href:"#",click:function(t){e(this).next(".custom-block-spoiler").toggle(),t.preventDefault()}})),t.addClass("spoiler-build")}}))}e(document).ready((function(){var o=e("#content");e("div.spoiler").addClass("custom-block-spoiler"),t(o.find(".custom-block-spoiler")),o.on("DOMNodeInserted",(function(o){return t(e(o.target).find(".custom-block-spoiler"))}))}))}(jQuery);;
!function(s){"use strict";var t=null;s("body").on("submit","form",(function(){s("[type=submit], [type=reset]").addClass("disabled"),null===t&&(t=s("[type=submit], [type=reset]",s(this))),t.addClass("submitted").append(s("<span/>",{class:"line-loading"}))})),s("form").on("click","[type=submit], [type=reset]",(function(e){t=s(this),s(this).hasClass("disabled")&&e.preventDefault()}))}(jQuery);;
!function(e){"use strict";e("body").on("keydown",(function(t){var i=e(".tab-modalize:visible");if(i.length>0&&9===t.which){var n=i.find(":focus"),f=i.find(":tabbable"),o=t.shiftKey?f.length-1:0;if(1===n.length){var a=f.index(n);t.shiftKey?a>0&&(o=a-1):a+1<f.length&&(o=a+1)}f.eq(o).focus(),t.stopPropagation(),t.preventDefault()}}))}(jQuery);;
!function(t){"use strict";if(t("#topic-suggest")[0]){var e=0,a=0,i=function(){var i=encodeURIComponent(t(this).val());if(!(i.length<3)){var l=t("#topic-result-container"),n=t("#topic-suggest").attr("url");!0!==l.data("ajax-load")&&(t.getJSON(n+"?q="+i,(function(i){var n=t("<ul></ul>"),r=null,o=0;clearTimeout(a),clearTimeout(e),t.each(i.results,(function(e,a){(r=t("<a></a>").attr("target","_blank")).text(a.title).attr("href",a.url).attr("title",a.subtitle);var i=new Date(a.pubdate).toLocaleDateString(),l=t("<a></a>").text(a.forumTitle).attr("href",a.forumUrl).attr("target","_blank");t("<li></li>").text(" dans le forum ").append(l).append(" le "+i).prepend(r).appendTo(n),o++})),o||(t("<li></li>").addClass("neither").text(l.data("neither")).appendTo(n),a=setTimeout((function(){t("#topic-suggest").hide(800)}),6e3)),l.html("").append(n),l.data("ajax-load",!1),t("#topic-suggest").show(800)})),l.data("ajax-load",!0))}};t("#id_title").on("blur",i),t("#id_title").on("keypress",(function(){var a=this,l=t(this).val().length;clearTimeout(e),e=setTimeout((function(){i.call(a)}),l<5?200*(12-2*l):2e3)}))}}(jQuery);;
!function(t){var a=t(".opinion"),n=t("#opinion-count");a.on("click",".unpick-action",(function(){var a=t(this),e=a.parent().parent(),o={csrfmiddlewaretoken:t("input[name='csrfmiddlewaretoken']").val()};a.data("operation")&&(o.operation=a.data("operation")),t.post(a.attr("data-url"),o).done((function(){if(o.operation)e.remove();else{a.prop("disabled",!0);var t=e.find(".state");t.text(t.data("toggle"))}n.text(parseInt(n.text(),10)-1)}))})),t(".unpublish-opinion").on("click",(function(){var a=t(this),n={csrfmiddlewaretoken:t("input[name='csrfmiddlewaretoken']").val(),operation:"REMOVE_PUB"};confirm(a.data("confirm"))&&t.post(a.data("url"),n).done((function(){alert(a.data("done")),void 0!==a.data("redirect-url")&&a.data("redirect-url")&&(window.location.href=a.data("redirect-url"))}))}))}(jQuery);;
!function(a){"use strict";var t=jQuery("body.userprofilepage .bio-container");if(t[0]){var o=t.find(".message-content"),e=t.find(".biography-overflow"),r=e.find("p");o[0].scrollHeight-o.innerHeight()>10?t.addClass("too-long-biography"):t.addClass("full-biography"),e.on("click",(function(){t.toggleClass("full-biography");var a=r.text();r.text(r.attr("data-other-label")),r.attr("data-other-label",a)}))}}();;
!function(){const e=document.getElementById("very-top-banner");if(!e)return;const t=e.dataset.slug;localStorage.getItem("hide-very-top-banner")===t||sessionStorage.getItem("hide-very-top-banner")===t?(e.remove(),document.body.classList.remove("has-top-banner")):(document.body.classList.add("has-top-banner"),e.querySelector("button").addEventListener("click",o=>{e.remove(),document.body.classList.remove("has-top-banner"),sessionStorage.setItem("hide-very-top-banner",t),(o.shiftKey||o.ctrlKey)&&localStorage.setItem("hide-very-top-banner",t)}))}();;
!function(e){"use strict";e(".open-zen-mode").length>0&&(e(".open-zen-mode").on("click",(function(n){var o=e(".open-zen-mode").text(),t=e(".open-zen-mode").attr("data-content-on-click");e(".open-zen-mode").attr("data-content-on-click",o),e(".open-zen-mode").text(t),"undefined"!=typeof sessionStorage&&(e(".content-container").hasClass("zen-mode")?"zenMode"in sessionStorage&&sessionStorage.setItem("zenMode","false"):sessionStorage.setItem("zenMode","true")),e(".content-container").toggleClass("zen-mode tab-modalize"),e(this).blur(),n.preventDefault(),n.stopPropagation()})),e("body").on("keydown",(function(n){if(e(".zen-mode").length>0&&27===n.which){var o=e(".open-zen-mode").text(),t=e(".open-zen-mode").attr("data-content-on-click");e(".open-zen-mode").attr("data-content-on-click",o),e(".open-zen-mode").text(t),"undefined"!=typeof sessionStorage&&"zenMode"in sessionStorage&&sessionStorage.setItem("zenMode","false"),e(".content-container").toggleClass("zen-mode tab-modalize"),e(this).blur(),n.stopPropagation()}})),"undefined"!=typeof sessionStorage&&"zenMode"in sessionStorage&&"true"===sessionStorage.getItem("zenMode")&&e(".open-zen-mode").click())}(jQuery);
//# sourceMappingURL=script.js.map